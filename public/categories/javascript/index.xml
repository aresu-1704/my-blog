<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>JavaScript on Kiến thức lập trình</title>
        <link>http://localhost:1313/categories/javascript/</link>
        <description>Recent content in JavaScript on Kiến thức lập trình</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>vi-vn</language>
        <lastBuildDate>Mon, 22 Dec 2025 01:20:00 +0700</lastBuildDate><atom:link href="http://localhost:1313/categories/javascript/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Bảo mật mạng trong ứng dụng Java &amp; JavaScript: từ HTTPS đến Man-in-the-Middle</title>
        <link>http://localhost:1313/post/https-mitm-security/</link>
        <pubDate>Mon, 22 Dec 2025 01:20:00 +0700</pubDate>
        
        <guid>http://localhost:1313/post/https-mitm-security/</guid>
        <description>&lt;img src="http://localhost:1313/images/https-security.jpg" alt="Featured image of post Bảo mật mạng trong ứng dụng Java &amp; JavaScript: từ HTTPS đến Man-in-the-Middle" /&gt;&lt;h2 id=&#34;https---hơn-cả-một-chữ-s&#34;&gt;HTTPS - Hơn cả một chữ S
&lt;/h2&gt;&lt;p&gt;Khi mình mới bắt đầu làm web, thường nghĩ HTTPS chỉ là HTTP thêm bảo mật, một tính năng &amp;ldquo;tốt là có&amp;rdquo; cho các website ngân hàng hay thương mại điện tử. Website blog cá nhân hay landing page đơn giản dùng HTTP cũng không sao. Nhưng càng đi sâu vào bảo mật mạng, mình mới thấy suy nghĩ đó ngây thơ đến mức nào.&lt;/p&gt;
&lt;p&gt;HTTPS không phải là một giao thức riêng biệt. Nó chính là HTTP chạy bên trên một lớp bảo mật gọi là TLS (Transport Layer Security), trước đây gọi là SSL (Secure Sockets Layer). Về bản chất, khi bạn truy cập &lt;code&gt;https://example.com&lt;/code&gt;, trình duyệt không trực tiếp gửi HTTP request lên server. Thay vào đó, nó thiết lập kết nối TLS trước, sau đó mới gửi dữ liệu HTTP qua kết nối đã được mã hóa này.&lt;/p&gt;
&lt;p&gt;TLS hoạt động ở giữa tầng Transport (TCP) và tầng Application (HTTP). Nó tạo ra một đường hầm mã hóa cho luồng dữ liệu. Mọi thứ đi qua đường hầm này đều được mã hóa, từ HTTP headers đến request body, response data, cookies, tokens. Người quan sát trên mạng chỉ thấy được chuỗi ký tự vô nghĩa đã mã hóa, không thể đọc được nội dung thực.&lt;/p&gt;
&lt;h2 id=&#34;vì-sao-http-thuần-túy-nguy-hiểm&#34;&gt;Vì sao HTTP thuần túy nguy hiểm
&lt;/h2&gt;&lt;p&gt;HTTP là giao thức văn bản thuần (plaintext). Khi bạn gửi request, mọi thứ được truyền đi dưới dạng text thuần túy qua mạng. Username, password, dữ liệu cá nhân, session tokens - tất cả đều lộ rõ cho bất kỳ ai có thể chặn lưu lượng mạng.&lt;/p&gt;
&lt;p&gt;Hồi còn học đại học, mình từng dùng Wireshark để bắt packets trên WiFi của trường. Chỉ trong vài phút, mình có thể thấy hàng chục HTTP requests từ các bạn trong lớp. Một website không dùng HTTPS để đăng nhập, mình thấy rõ username và password trong POST request body. Cookies của Facebook, session IDs của các forums - tất cả đều bị lộ.&lt;/p&gt;
&lt;p&gt;Điều đáng sợ là không cần phải là hacker để làm điều này. Bất kỳ ai ngồi chung WiFi công cộng với bạn đều có thể bắt lưu lượng mạng. Starbucks, sân bay, khách sạn - những nơi này là mỏ vàng cho kẻ tấn công. Họ chỉ cần dựng một WiFi access point với tên giống WiFi chính thức, đợi người dùng kết nối vào, và âm thầm bắt toàn bộ HTTP traffic.&lt;/p&gt;
&lt;h2 id=&#34;man-in-the-middle-attack---khi-kẻ-thứ-ba-chen-vào&#34;&gt;Man-in-the-Middle attack - Khi kẻ thứ ba chen vào
&lt;/h2&gt;&lt;p&gt;Tấn công Man-in-the-Middle (MITM) còn nguy hiểm hơn việc nghe lén thụ động. Trong cuộc tấn công này, kẻ tấn công không chỉ quan sát lưu lượng mà còn có thể chỉnh sửa nó. Họ đặt mình ở giữa client và server, chặn requests từ client, có thể sửa đổi rồi chuyển tiếp đến server. Tương tự, response từ server cũng đi qua kẻ tấn công trước khi đến client.&lt;/p&gt;
&lt;p&gt;Cách hoạt động cụ thể như thế này. Giả sử bạn đang kết nối vào &lt;code&gt;http://bank.com&lt;/code&gt;. Request của bạn phải đi qua router, ISP, có thể qua nhiều điểm trung gian trước khi đến server. Kẻ tấn công có thể xâm nhập bất kỳ điểm nào trên đường đi này. Khi request đến máy của kẻ tấn công, họ có toàn quyền đọc và sửa đổi.&lt;/p&gt;
&lt;p&gt;Một kịch bản phổ biến là ARP spoofing trên mạng nội bộ. Kẻ tấn công gửi các thông điệp ARP giả mạo để lừa các thiết bị nghĩ rằng máy của họ là gateway router. Mọi lưu lượng từ nạn nhân đều được định tuyến qua máy của kẻ tấn công trước. Họ có thể thay đổi giá trong các yêu cầu thương mại điện tử, chèn script độc hại vào HTML responses, hoặc đơn giản là đánh cắp thông tin đăng nhập.&lt;/p&gt;
&lt;p&gt;Với HTTP, không có cách nào để client xác minh rằng response thực sự đến từ server hợp lệ. Client gửi request đến địa chỉ IP, nhận response từ IP đó, và tin tưởng response. Nhưng nếu kẻ tấn công kiểm soát routing hoặc DNS, họ có thể điều hướng lưu lượng đến server giả mạo của họ. Client không có cách phân biệt.&lt;/p&gt;
&lt;h2 id=&#34;tls-và-chuỗi-tin-cậy-certificate&#34;&gt;TLS và chuỗi tin cậy certificate
&lt;/h2&gt;&lt;p&gt;TLS giải quyết vấn đề này thông qua mã hóa và certificate authorities. Khi client kết nối đến HTTPS server, server phải xuất trình một chứng chỉ số (digital certificate). Certificate này chứa public key của server và được ký bởi một Certificate Authority (CA) đáng tin cậy.&lt;/p&gt;
&lt;p&gt;Browser có danh sách các CA đáng tin cậy được tích hợp sẵn. Khi nhận certificate từ server, browser xác minh chữ ký của CA. Nếu chữ ký hợp lệ và CA nằm trong danh sách đáng tin cậy, browser tin rằng certificate xác thực. Lúc này, client và server thực hiện key exchange protocol (thường là Diffie-Hellman hoặc RSA) để thiết lập một shared secret. Shared secret này dùng để mã hóa tất cả giao tiếp sau đó.&lt;/p&gt;
&lt;p&gt;Điều quan trọng là kẻ tấn công không thể làm giả certificate. Để tạo certificate hợp lệ cho &lt;code&gt;bank.com&lt;/code&gt;, họ cần private key của một CA. Nhưng các CA bảo vệ private keys của họ vô cùng nghiêm ngặt. Nếu một CA bị xâm nhập, trình duyệt hiện đại sẽ thu hồi lòng tin đối với CA đó.&lt;/p&gt;
&lt;p&gt;Ngay cả khi kẻ tấn công có thể chặn TLS traffic, họ chỉ thấy dữ liệu đã mã hóa. Không có private key của server, họ không thể giải mã. Nếu họ cố chỉnh sửa dữ liệu đã mã hóa, kiểm tra tính toàn vẹn sẽ thất bại và kết nối bị ngắt. Client sẽ thấy lỗi thay vì nhận dữ liệu bị hỏng.&lt;/p&gt;
&lt;h2 id=&#34;https-trong-java-server-applications&#34;&gt;HTTPS trong Java server applications
&lt;/h2&gt;&lt;p&gt;Khi phát triển Java backend, bật TLS là một phần thiết yếu của thiết lập production. Java sử dụng keystores để quản lý certificates và private keys. Keystore là một file mã hóa chứa certificates và keys, được bảo vệ bởi password.&lt;/p&gt;
&lt;p&gt;Để thiết lập HTTPS trong Java application server như Tomcat, bạn cần tạo hoặc lấy một certificate. Trong development, bạn có thể tự tạo self-signed certificate bằng keytool:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;keytool -genkeypair -alias myserver -keyalg RSA -keysize &lt;span style=&#34;color:#ae81ff&#34;&gt;2048&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    -validity &lt;span style=&#34;color:#ae81ff&#34;&gt;365&lt;/span&gt; -keystore keystore.jks -storepass changeit
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Lệnh này tạo một RSA key pair và self-signed certificate, lưu chúng trong &lt;code&gt;keystore.jks&lt;/code&gt;. Trong production, thay vì self-signed cert, bạn sẽ yêu cầu certificate từ một CA đáng tin cậy như Let&amp;rsquo;s Encrypt, DigiCert, hoặc Comodo.&lt;/p&gt;
&lt;p&gt;Cấu hình Tomcat để dùng keystore:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;Connector&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;port=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;8443&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;protocol=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;org.apache.coyote.http11.Http11NioProtocol&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;           &lt;span style=&#34;color:#a6e22e&#34;&gt;maxThreads=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;150&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SSLEnabled=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;SSLHostConfig&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;Certificate&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;certificateKeystoreFile=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;conf/keystore.jks&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                     &lt;span style=&#34;color:#a6e22e&#34;&gt;certificateKeystorePassword=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;changeit&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                     &lt;span style=&#34;color:#a6e22e&#34;&gt;type=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;RSA&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/SSLHostConfig&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/Connector&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Với Spring Boot, configuration còn đơn giản hơn trong &lt;code&gt;application.properties&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-properties&#34; data-lang=&#34;properties&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;server.port&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;8443&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;server.ssl.key-store&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;classpath:keystore.jks&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;server.ssl.key-store-password&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;changeit&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;server.ssl.key-store-type&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;JKS&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;server.ssl.key-alias&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;myserver&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Khi server khởi động, Java&amp;rsquo;s SSL/TLS implementation (JSSE - Java Secure Socket Extension) xử lý toàn bộ TLS handshake, mã hóa và giải mã. Application code của bạn không cần biết gì về underlying encryption. Bạn vẫn đọc request và gửi response như bình thường, JSSE tự động mã hóa/giải mã ở phía dưới.&lt;/p&gt;
&lt;p&gt;Một best practice quan trọng là buộc chuyển hướng sang HTTPS. Nếu người dùng vô tình truy cập &lt;code&gt;http://example.com&lt;/code&gt;, server nên chuyển hướng đến &lt;code&gt;https://example.com&lt;/code&gt;. Trong Spring Security:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;@Configuration&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SecurityConfig&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;extends&lt;/span&gt; WebSecurityConfigurerAdapter {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;@Override&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;protected&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;configure&lt;/span&gt;(HttpSecurity http) &lt;span style=&#34;color:#66d9ef&#34;&gt;throws&lt;/span&gt; Exception {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        http.&lt;span style=&#34;color:#a6e22e&#34;&gt;requiresChannel&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            .&lt;span style=&#34;color:#a6e22e&#34;&gt;anyRequest&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            .&lt;span style=&#34;color:#a6e22e&#34;&gt;requiresSecure&lt;/span&gt;(); &lt;span style=&#34;color:#75715e&#34;&gt;// Force HTTPS&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;javascript-và-các-hạn-chế-bảo-mật-của-browser&#34;&gt;JavaScript và các hạn chế bảo mật của browser
&lt;/h2&gt;&lt;p&gt;Phía client, JavaScript trong browser cũng có những hạn chế nghiêm ngặt liên quan đến HTTPS. Trình duyệt hiện đại triển khai nhiều tính năng bảo mật chỉ khả dụng khi trang được phục vụ qua HTTPS.&lt;/p&gt;
&lt;p&gt;Service Workers, một công nghệ cho Progressive Web Apps và chức năng offline, hoàn toàn yêu cầu HTTPS. Browser không cho đăng ký service workers từ HTTP pages (trừ localhost cho development). Lý do là service workers có quyền chặn network requests và chỉnh sửa responses. Nếu kẻ tấn công có thể chèn malicious service worker qua HTTP, họ có thể kiểm soát toàn bộ các requests tiếp theo của người dùng.&lt;/p&gt;
&lt;p&gt;Geolocation API, camera và microphone access, clipboard API, payment request API - tất cả đều yêu cầu HTTPS. Browser không muốn các quyền nhạy cảm này được cấp cho các trang có thể không an toàn. Nếu trang được phục vụ qua HTTP, kẻ tấn công có thể chỉnh sửa JavaScript để lạm dụng những quyền này.&lt;/p&gt;
&lt;p&gt;Cookies với flag &lt;code&gt;Secure&lt;/code&gt; chỉ được gửi qua HTTPS connections. Đây là cách bảo vệ session cookies khỏi bị đánh cắp qua HTTP. Khi đặt cookie:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;document.&lt;span style=&#34;color:#a6e22e&#34;&gt;cookie&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sessionId=abc123; Secure; HttpOnly; SameSite=Strict&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Flag &lt;code&gt;Secure&lt;/code&gt; đảm bảo rằng ngay cả khi người dùng vô tình truy cập HTTP version của site, session cookie sẽ không được gửi. &lt;code&gt;HttpOnly&lt;/code&gt; ngăn JavaScript truy cập (bảo vệ khỏi XSS), và &lt;code&gt;SameSite=Strict&lt;/code&gt; ngăn cookie được gửi trong cross-site requests (bảo vệ khỏi CSRF).&lt;/p&gt;
&lt;p&gt;HTTP Strict Transport Security (HSTS) là một cơ chế mà server có thể ra lệnh cho browser &amp;ldquo;luôn luôn dùng HTTPS cho domain này&amp;rdquo;. Server gửi header:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-http&#34; data-lang=&#34;http&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;Strict-Transport-Security: max-age=31536000; includeSubDomains
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Browser sẽ nhớ chỉ thị này trong 31536000 giây(1 năm). Trong thời gian đó, mọi nỗ lực truy cập HTTP version sẽ tự động chuyển hướng sang HTTPS ngay ở browser, không cần round-trip đến server. Điều này ngăn chặn một loại tấn công MITM gọi là SSL stripping, nơi kẻ tấn công hạ cấp kết nối HTTPS xuống HTTP.&lt;/p&gt;
&lt;h2 id=&#34;mixed-content-và-browser-warnings&#34;&gt;Mixed content và browser warnings
&lt;/h2&gt;&lt;p&gt;Một vấn đề phổ biến khi migrate từ HTTP sang HTTPS là mixed content. Nếu HTTPS page load resources (scripts, stylesheets, images) qua HTTP, browser sẽ block hoặc warn. Lý do là ngay cả khi main page secure, HTTP resources có thể bị modified bởi attacker, compromise toàn bộ page.&lt;/p&gt;
&lt;p&gt;Ví dụ, nếu HTTPS page include:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;script&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://cdn.example.com/jquery.js&amp;#34;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;script&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Browser sẽ block script này. Attacker có thể MITM connection đến CDN và inject malicious code vào jQuery. Dù main page được deliver securely, injected script có full access để steal data.&lt;/p&gt;
&lt;p&gt;Modern browsers classify mixed content thành hai loại. Passive mixed content (images, audio, video) được load nhưng có warning. Active mixed content (scripts, stylesheets, fonts) bị block hoàn toàn. Để fix, bạn phải đảm bảo tất cả resources loaded qua HTTPS hoặc use protocol-relative URLs:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;script&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//cdn.example.com/jquery.js&amp;#34;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;script&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Protocol-relative URLs inherit protocol của parent page. Nếu page là HTTPS, resource cũng được load qua HTTPS.&lt;/p&gt;
&lt;h2 id=&#34;certificate-validation-và-trust-issues&#34;&gt;Certificate validation và trust issues
&lt;/h2&gt;&lt;p&gt;Mặc dù TLS provide strong security, nó rely on certificate validation. Nếu client không properly validate certificates, security bị compromise. Một mistake phổ biến trong Java code là disable certificate validation trong development rồi quên enable lại trong production.&lt;/p&gt;
&lt;p&gt;Mình từng thấy code như này trong production:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// DANGER: Disable certificate validation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;TrustManager&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; trustAllCerts &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; TrustManager&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; X509TrustManager() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; X509Certificate&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;getAcceptedIssuers&lt;/span&gt;() { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;; }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;checkClientTrusted&lt;/span&gt;(X509Certificate&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; certs, String authType) {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;checkServerTrusted&lt;/span&gt;(X509Certificate&lt;span style=&#34;color:#f92672&#34;&gt;[]&lt;/span&gt; certs, String authType) {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;SSLContext sc &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; SSLContext.&lt;span style=&#34;color:#a6e22e&#34;&gt;getInstance&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SSL&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sc.&lt;span style=&#34;color:#a6e22e&#34;&gt;init&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;, trustAllCerts, &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; java.&lt;span style=&#34;color:#a6e22e&#34;&gt;security&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SecureRandom&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;HttpsURLConnection.&lt;span style=&#34;color:#a6e22e&#34;&gt;setDefaultSSLSocketFactory&lt;/span&gt;(sc.&lt;span style=&#34;color:#a6e22e&#34;&gt;getSocketFactory&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Code này accept bất kỳ certificate nào, kể cả self-signed hay expired certs. Điều này hoàn toàn defeat TLS security. Attacker có thể present fake certificate và client sẽ happily accept.&lt;/p&gt;
&lt;p&gt;Proper certificate validation check nhiều thứ: certificate chưa expire, issued bởi trusted CA, issued cho đúng domain (Common Name hoặc Subject Alternative Names match), certificate chain valid, certificate chưa bị revoke. Java&amp;rsquo;s default SSL implementation làm tất cả checks này, nhưng developers đôi khi disable vì &amp;ldquo;certificate errors&amp;rdquo; trong development.&lt;/p&gt;
&lt;p&gt;Better approach là use proper certificates ngay cả trong development. Let&amp;rsquo;s Encrypt provide free certificates, hoặc bạn có thể setup internal CA cho organization. Nếu thực sự cần self-signed certs trong dev, add chúng vào Java&amp;rsquo;s truststore thay vì disable validation hoàn toàn.&lt;/p&gt;
&lt;h2 id=&#34;certificate-pinning---extra-security-layer&#34;&gt;Certificate pinning - Extra security layer
&lt;/h2&gt;&lt;p&gt;Đối với high-security applications, certificate pinning provide thêm một layer protection. Thay vì trust bất kỳ CA nào trong system trust store, application chỉ accept certificates signed bởi specific CA hoặc chỉ accept một specific certificate.&lt;/p&gt;
&lt;p&gt;Concept là application &amp;ldquo;pin&amp;rdquo; expected certificate hoặc public key. Khi connect đến server, nếu presented certificate không match pinned certificate, connection bị reject ngay cả khi certificate valid theo normal validation rules.&lt;/p&gt;
&lt;p&gt;Trong Android development với Java/Kotlin:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;CertificatePinner certificatePinner &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; CertificatePinner.&lt;span style=&#34;color:#a6e22e&#34;&gt;Builder&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    .&lt;span style=&#34;color:#a6e22e&#34;&gt;add&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;api.example.com&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sha256/AAAAAAAAAAAABBBBBBBBBBBBCCCCCCCCCCCC=&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    .&lt;span style=&#34;color:#a6e22e&#34;&gt;build&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;OkHttpClient client &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; OkHttpClient.&lt;span style=&#34;color:#a6e22e&#34;&gt;Builder&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    .&lt;span style=&#34;color:#a6e22e&#34;&gt;certificatePinner&lt;/span&gt;(certificatePinner)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    .&lt;span style=&#34;color:#a6e22e&#34;&gt;build&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Pinning protect khỏi compromised CAs. Nếu một CA bị hack và issue fake certificate cho &lt;code&gt;api.example.com&lt;/code&gt;, normal validation sẽ accept certificate đó. Nhưng với pinning, app detect rằng certificate không match pinned value và refuse connection.&lt;/p&gt;
&lt;p&gt;Downside của pinning là nó make certificate rotation khó hơn. Khi server certificate expire và được renew, pinned value change. Apps đã deployed sẽ fail connect. Bạn cần plan ahead, pin multiple certificates (current và backup), và update pins trước khi certificates expire.&lt;/p&gt;
&lt;h2 id=&#34;performance-considerations-của-tls&#34;&gt;Performance considerations của TLS
&lt;/h2&gt;&lt;p&gt;Một concern phổ biến về HTTPS là performance overhead. TLS handshake require additional round-trips, encryption/decryption consume CPU. Nhưng trong practice, overhead này minimal với modern hardware và optimized implementations.&lt;/p&gt;
&lt;p&gt;TLS 1.3, latest version, reduce handshake từ 2 round-trips xuống 1 round-trip so với TLS 1.2. Điều này cut latency đáng kể cho connection establishment. Session resumption cho phép clients reuse previous session keys, skip full handshake entirely cho subsequent connections.&lt;/p&gt;
&lt;p&gt;Modern CPUs có AES-NI (Advanced Encryption Standard New Instructions), tăng tốc phần cứng cho mã hóa AES. Với AES-NI, overhead mã hóa gần như không đáng kể. Servers có thể xử lý hàng nghìn kết nối TLS mà CPU usage chỉ tăng vài phần trăm.&lt;/p&gt;
&lt;p&gt;HTTP/2, yêu cầu HTTPS trong hầu hết triển khai browser, thực ra cải thiện hiệu suất so với HTTP/1.1. Multiplexing, header compression, server push đều đóng góp vào việc tải trang nhanh hơn. Trong nhiều tests, HTTPS với HTTP/2 nhanh hơn HTTP thuần túy với HTTP/1.1.&lt;/p&gt;
&lt;p&gt;Google và các đại gia công nghệ khác đã chứng minh rằng HTTPS overhead không đáng kể. Google báo cáo rằng chuyển Gmail sang HTTPS chỉ thêm dưới 1% server load và không có tác động đáng chú ý đến trải nghiệm người dùng.&lt;/p&gt;
&lt;h2 id=&#34;https-không-còn-là-tùy-chọn&#34;&gt;HTTPS không còn là tùy chọn
&lt;/h2&gt;&lt;p&gt;Năm 2018, Google Chrome bắt đầu đánh dấu tất cả HTTP sites là &amp;ldquo;Not Secure&amp;rdquo; trong address bar. Firefox, Safari, Edge đều làm theo. Người dùng nhìn thấy cảnh báo rõ ràng khi truy cập HTTP sites. Điều này tạo động lực mạnh mẽ cho chủ site chuyển sang HTTPS.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s Encrypt, một certificate authority miễn phí, đã loại bỏ rào cản chi phí của HTTPS. Certificate renewal có thể tự động hóa qua ACME protocol. Không còn lẽ bào nào để không dùng HTTPS.&lt;/p&gt;
&lt;p&gt;Công cụ tìm kiếm như Google ưu tiên HTTPS sites trong xếp hạng. HTTP sites bị phạt. Từ góc độ kinh doanh, không dùng HTTPS nghĩa là mất traffic và doanh thu.&lt;/p&gt;
&lt;p&gt;Các nhà cung cấp browser đang dần ngừng hỗ trợ các tính năng cho HTTP. Chrome đã thông báo rằng các tính năng mạnh sẽ yêu cầu secure contexts. Trong tương lai, có thể HTTP sẽ bị xem như giao thức lỗi thời, chỉ dùng cho hệ thống cũ.&lt;/p&gt;
&lt;p&gt;Từ góc nhìn developer, HTTPS phải là lựa chọn mặc định. Khi bắt đầu dự án mới, thiết lập HTTPS ngay từ đầu. Đừng đợi đến khi launch rồi mới chuyển đổi, vì việc chuyển đổi có thể gây hỏng và đòi hỏi nỗ lực lớn. Môi trường development nên phản ánh production càng nhiều càng tốt, bao gồm cả HTTPS.&lt;/p&gt;
&lt;h2 id=&#34;kết-luận&#34;&gt;Kết luận
&lt;/h2&gt;&lt;p&gt;HTTPS và TLS không phải là &amp;ldquo;tính năng thêm&amp;rdquo; hay &amp;ldquo;tốt là có&amp;rdquo;. Chúng là yêu cầu cơ bản cho bất kỳ ứng dụng web nào xử lý dữ liệu người dùng. Các cuộc tấn công Man-in-the-Middle không phải là mối đe dọa lý thuyết - chúng xảy ra mỗi ngày trên mạng WiFi công cộng, routers bị xâm nhập, và các ISP độc hại.&lt;/p&gt;
&lt;p&gt;HTTP lộ mọi thứ dưới dạng văn bản thuần. Passwords, thông tin cá nhân, session tokens - tất cả lộ rõ cho kẻ tấn công. TLS mã hóa giao tiếp, xác minh danh tính server, và đảm bảo tính toàn vẹn dữ liệu. Đây không phải là kịch bảo mật, mà là các biện pháp bảo vệ thiết yếu mà người dùng xứng đáng được có.&lt;/p&gt;
&lt;p&gt;Trong Java applications, việc kích hoạt TLS đơn giản với keystores và SSL configurations. Các tính năng bảo mật của browser ngày càng yêu cầu HTTPS, từ service workers đến các APIs mạnh. Overhead hiệu suất của TLS tối thiểu và được bù bổi các cải tiến như HTTP/2.&lt;/p&gt;
&lt;p&gt;Là developers, trách nhiệm của chúng ta là bảo vệ dữ liệu người dùng. HTTPS là mức tối thiểu. Không triển khai HTTPS trong năm 2025 không chỉ là thiếu trách nhiệm mà còn có thể để lộ người dùng trước các cuộc tấn công. Các công cụ và hạ tầng sẵn có để làm cho HTTPS dễ dàng và miễn phí. Không còn lý do gì để không dùng nó.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Tham khảo:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RFC 8446 (TLS 1.3)&lt;/li&gt;
&lt;li&gt;OWASP Transport Layer Protection Cheat Sheet&lt;/li&gt;
&lt;li&gt;&amp;ldquo;Bulletproof SSL and TLS&amp;rdquo; - Ivan Ristić&lt;/li&gt;
&lt;li&gt;Let&amp;rsquo;s Encrypt Documentation&lt;/li&gt;
&lt;li&gt;MDN Web Security Documentation&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>CORS và Same-Origin Policy dưới góc nhìn mạng máy tính (JavaScript)</title>
        <link>http://localhost:1313/post/cors-same-origin-policy/</link>
        <pubDate>Mon, 22 Dec 2025 01:11:00 +0700</pubDate>
        
        <guid>http://localhost:1313/post/cors-same-origin-policy/</guid>
        <description>&lt;img src="http://localhost:1313/images/cors.jpg" alt="Featured image of post CORS và Same-Origin Policy dưới góc nhìn mạng máy tính (JavaScript)" /&gt;&lt;h2 id=&#34;khi-trình-duyệt-trở-thành-bức-tường-bảo-vệ&#34;&gt;Khi trình duyệt trở thành bức tường bảo vệ
&lt;/h2&gt;&lt;p&gt;Hồi mới học web development, mình thường gặp lỗi này khi gọi API từ frontend: &amp;ldquo;Access to fetch at &amp;lsquo;&lt;a class=&#34;link&#34; href=&#34;https://api.example.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://api.example.com&lt;/a&gt;&amp;rsquo; from origin &amp;lsquo;http://localhost:3000&amp;rsquo; has been blocked by CORS policy&amp;rdquo;. Lúc đầu nghĩ đây là lỗi code, sửa mãi không được. Rồi mình test API bằng Postman thì thấy nó chạy ngon lành. Càng confused hơn, API hoạt động tốt mà sao trình duyệt lại chặn?&lt;/p&gt;
&lt;p&gt;Câu trả lời nằm ở chỗ trình duyệt không phải là một HTTP client thông thường như Postman hay curl. Trình duyệt là một môi trường thực thi code với quyền truy cập vào cookies, localStorage, session tokens của người dùng. Nếu không có cơ chế bảo mật, bất kỳ website nào cũng có thể chạy JavaScript để đánh cắp dữ liệu từ các site khác mà user đang đăng nhập.&lt;/p&gt;
&lt;h2 id=&#34;same-origin-policy---nền-tảng-bảo-mật-web&#34;&gt;Same-Origin Policy - Nền tảng bảo mật web
&lt;/h2&gt;&lt;p&gt;Same-Origin Policy ra đời từ những ngày đầu của web để ngăn chặn một website đọc dữ liệu từ website khác. Hai URL được coi là cùng origin nếu chúng có cùng protocol, domain và port. Ví dụ, &lt;code&gt;https://example.com:443/page1&lt;/code&gt; và &lt;code&gt;https://example.com:443/page2&lt;/code&gt; là cùng origin. Nhưng &lt;code&gt;https://example.com&lt;/code&gt; và &lt;code&gt;http://example.com&lt;/code&gt; khác origin vì protocol khác nhau. Tương tự, &lt;code&gt;https://example.com&lt;/code&gt; và &lt;code&gt;https://api.example.com&lt;/code&gt; cũng khác origin vì subdomain khác nhau.&lt;/p&gt;
&lt;p&gt;Chính sách này nghe có vẻ strict, nhưng hãy tưởng tượng kịch bản sau. Bạn đang đăng nhập vào ngân hàng ở tab này, session cookie được lưu trong browser. Sau đó bạn vào một website độc hại ở tab khác. Nếu không có Same-Origin Policy, website đó có thể chạy JavaScript để gửi request đến &lt;code&gt;https://bank.com/api/transfer&lt;/code&gt; với credentials của bạn. Vì cookies được tự động gửi kèm trong mỗi request đến cùng domain, ngân hàng sẽ nghĩ đây là request hợp lệ từ bạn và thực hiện chuyển tiền.&lt;/p&gt;
&lt;p&gt;Đây chính là CSRF (Cross-Site Request Forgery) attack. Same-Origin Policy ngăn chặn scenario này bằng cách không cho phép JavaScript từ &lt;code&gt;evil.com&lt;/code&gt; đọc response từ &lt;code&gt;bank.com&lt;/code&gt;. Request vẫn được gửi đi (vì HTTP protocol không biết gì về origins), nhưng trình duyệt sẽ chặn JavaScript access vào response data.&lt;/p&gt;
&lt;p&gt;Điểm quan trọng cần hiểu là Same-Origin Policy được implement ở tầng ứng dụng bởi trình duyệt, không phải ở network layer hay transport layer. Nếu nhìn qua mô hình OSI, HTTP request vẫn đi qua các tầng Physical, Data Link, Network, Transport một cách bình thường. Server nhận request, xử lý và gửi response về. Nhưng khi response về đến browser (tầng Application), browser kiểm tra origin và quyết định có cho phép JavaScript access hay không.&lt;/p&gt;
&lt;h2 id=&#34;vấn-đề-với-modern-web-applications&#34;&gt;Vấn đề với modern web applications
&lt;/h2&gt;&lt;p&gt;Thời đầu web, các trang đều static HTML được serve từ cùng một domain. Same-Origin Policy hoạt động hoàn hảo. Nhưng modern architecture lại khác. Frontend chạy trên &lt;code&gt;https://app.example.com&lt;/code&gt;, backend API ở &lt;code&gt;https://api.example.com&lt;/code&gt;, CDN serving assets từ &lt;code&gt;https://cdn.example.com&lt;/code&gt;. Đây là các origins khác nhau, và Same-Origin Policy sẽ block tất cả.&lt;/p&gt;
&lt;p&gt;Mình từng làm một project mà frontend được deploy lên Netlify (&lt;code&gt;https://myapp.netlify.app&lt;/code&gt;) còn backend API chạy trên Heroku (&lt;code&gt;https://myapi.herokuapp.com&lt;/code&gt;). Khi frontend gọi API, browser ngay lập tức block với CORS error. Đây không phải là lỗi của code, mà là Same-Origin Policy đang làm đúng nhiệm vụ bảo vệ. Vấn đề là làm sao để cho phép cross-origin requests một cách có kiểm soát?&lt;/p&gt;
&lt;h2 id=&#34;cors---cơ-chế-nới-lỏng-có-kiểm-soát&#34;&gt;CORS - Cơ chế nới lỏng có kiểm soát
&lt;/h2&gt;&lt;p&gt;CORS (Cross-Origin Resource Sharing) ra đời như một mechanism để server có thể explicit cho phép requests từ origins khác. Ý tưởng đơn giản: server gửi các headers đặc biệt trong response để báo cho browser biết &amp;ldquo;origin này được phép truy cập resource của tôi&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Header quan trọng nhất là &lt;code&gt;Access-Control-Allow-Origin&lt;/code&gt;. Khi server gửi header này trong response, browser sẽ kiểm tra xem origin của request có match với value trong header không. Nếu match, JavaScript được phép access response. Nếu không match, browser block access.&lt;/p&gt;
&lt;p&gt;Ví dụ, khi frontend ở &lt;code&gt;https://app.example.com&lt;/code&gt; gọi API ở &lt;code&gt;https://api.example.com&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Frontend code chạy trên https://app.example.com
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;fetch&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;https://api.example.com/users&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    .&lt;span style=&#34;color:#a6e22e&#34;&gt;then&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt; =&amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;json&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    .&lt;span style=&#34;color:#a6e22e&#34;&gt;then&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt; =&amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    .&lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt; =&amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CORS error:&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Browser sẽ gửi request với header &lt;code&gt;Origin: https://app.example.com&lt;/code&gt;. Server nhận request, xử lý, và trả về response kèm header:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Access-Control-Allow-Origin: https://app.example.com
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Browser thấy origin match, cho phép JavaScript access data. Simple và hiệu quả.&lt;/p&gt;
&lt;h2 id=&#34;preflight-request---bước-kiểm-tra-an-toàn&#34;&gt;Preflight request - Bước kiểm tra an toàn
&lt;/h2&gt;&lt;p&gt;Nhưng có một điều thú vị. Đối với một số loại requests, browser không gửi actual request ngay lập tức. Thay vào đó, nó gửi một &amp;ldquo;preflight&amp;rdquo; request dùng method OPTIONS để hỏi server &amp;ldquo;tôi muốn gửi request này, bạn có cho phép không?&amp;rdquo;. Server phải respond với các CORS headers thích hợp, browser mới gửi actual request.&lt;/p&gt;
&lt;p&gt;Preflight request xảy ra khi request không phải là &amp;ldquo;simple request&amp;rdquo;. Simple request phải thỏa mãn tất cả các điều kiện sau: method phải là GET, HEAD hoặc POST; không có custom headers ngoài một số headers được cho phép như Content-Type, Accept; nếu có Content-Type thì phải là &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;, &lt;code&gt;multipart/form-data&lt;/code&gt; hoặc &lt;code&gt;text/plain&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Nghe phức tạp, nhưng về cơ bản, nếu bạn gửi JSON với &lt;code&gt;Content-Type: application/json&lt;/code&gt; hoặc thêm custom header như &lt;code&gt;Authorization: Bearer token&lt;/code&gt;, request không còn &amp;ldquo;simple&amp;rdquo; nữa. Browser sẽ gửi preflight.&lt;/p&gt;
&lt;p&gt;Tại sao lại cần preflight? Lý do là để protect legacy servers. Trước khi CORS ra đời, nhiều servers được build với giả định rằng chỉ same-origin requests mới đến được. Nếu browser cho phép cross-origin requests với methods như PUT, DELETE hoặc custom headers mà không kiểm tra trước, những servers này có thể bị attack. Preflight request cho server cơ hội từ chối trước khi actual request được gửi.&lt;/p&gt;
&lt;p&gt;Ví dụ khi gửi JSON:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Request này sẽ trigger preflight
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;fetch&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;https://api.example.com/users&amp;#39;&lt;/span&gt;, {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;method&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;POST&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;headers&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Content-Type&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;application/json&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Authorization&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Bearer mytoken123&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    },
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;body&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;JSON&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;stringify&lt;/span&gt;({ &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;John&amp;#39;&lt;/span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;});
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Browser sẽ gửi preflight request trước:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;OPTIONS /users HTTP/1.1
Host: api.example.com
Origin: https://app.example.com
Access-Control-Request-Method: POST
Access-Control-Request-Headers: Content-Type, Authorization
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Server phải respond:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;HTTP/1.1 204 No Content
Access-Control-Allow-Origin: https://app.example.com
Access-Control-Allow-Methods: POST, GET, OPTIONS
Access-Control-Allow-Headers: Content-Type, Authorization
Access-Control-Max-Age: 86400
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;Access-Control-Max-Age&lt;/code&gt; cho browser biết có thể cache preflight response trong 86400 giây (24 giờ). Trong thời gian này, browser không cần gửi preflight lại cho cùng loại request, giảm overhead.&lt;/p&gt;
&lt;h2 id=&#34;tại-sao-postman-không-gặp-cors&#34;&gt;Tại sao Postman không gặp CORS
&lt;/h2&gt;&lt;p&gt;Đây là câu hỏi mình hay gặp nhất. API chạy tốt trên Postman nhưng lại CORS error trên browser. Nguyên nhân đơn giản: Postman không phải là trình duyệt web. Nó là một HTTP client thuần túy, không implement Same-Origin Policy.&lt;/p&gt;
&lt;p&gt;Khi bạn gửi request từ Postman, nó chỉ đơn giản là tạo HTTP request, gửi đi, nhận response và hiển thị. Không có khái niệm &amp;ldquo;origin&amp;rdquo;, không có security restrictions. Postman không chạy JavaScript từ websites mà user đang browse, nên không cần bảo vệ user khỏi malicious scripts.&lt;/p&gt;
&lt;p&gt;Còn browser thì khác. Browser là một platform chạy code từ bất kỳ website nào user visit. Nếu không có Same-Origin Policy và CORS, một website độc hại có thể exploit browser để truy cập dữ liệu từ các sites khác, sử dụng cookies và credentials của user. Browser phải assume rằng mọi website đều potentially malicious và áp dụng các restrictions tương ứng.&lt;/p&gt;
&lt;p&gt;Đây cũng là lý do tại sao backend developers thường confused về CORS. Khi họ test API bằng curl hoặc Postman, mọi thứ work perfectly. Nhưng khi frontend team integrate, lại báo CORS errors. Đó không phải lỗi của API code, mà là vì API chưa được config để accept cross-origin requests từ browser.&lt;/p&gt;
&lt;h2 id=&#34;cors-trong-kiến-trúc-phân-tầng&#34;&gt;CORS trong kiến trúc phân tầng
&lt;/h2&gt;&lt;p&gt;Để hiểu rõ hơn vị trí của CORS trong stack, hãy nhìn vào mô hình OSI. HTTP request bắt đầu từ tầng Application (tầng 7), đi xuống qua Presentation, Session, Transport (TCP), Network (IP), Data Link, và cuối cùng là Physical layer. Data được encode, packet-ized, routed và transmitted qua network.&lt;/p&gt;
&lt;p&gt;Ở phía server, request đi ngược lại từ Physical lên Application. Server process request ở tầng Application, generate response và gửi xuống ngược lại. Response travel qua các tầng giống như request.&lt;/p&gt;
&lt;p&gt;Same-Origin Policy và CORS hoạt động hoàn toàn ở tầng Application, specifically là ở browser runtime. Network layers bên dưới không biết gì về origins hay CORS. TCP connection được establish bình thường, HTTP request được gửi và nhận response thành công. Chỉ khi response về đến browser, JavaScript runtime mới kiểm tra CORS headers và quyết định có expose response cho script hay không.&lt;/p&gt;
&lt;p&gt;Điều này giải thích tại sao bạn có thể thấy request thành công trong Network tab của DevTools (vì request đã đến server và nhận về response ở HTTP level), nhưng JavaScript vẫn báo lỗi CORS (vì browser block access ở Application level).&lt;/p&gt;
&lt;h2 id=&#34;implement-cors-ở-backend&#34;&gt;Implement CORS ở backend
&lt;/h2&gt;&lt;p&gt;Việc enable CORS ở backend khá straightforward nhưng cần cẩn thận. Nhiều developers để &lt;code&gt;Access-Control-Allow-Origin: *&lt;/code&gt; cho tiện, nhưng đây là security risk. Wildcard cho phép mọi origin access API của bạn, kể cả các malicious sites.&lt;/p&gt;
&lt;p&gt;Better practice là explicitly list allowed origins. Nếu bạn có nhiều environments (dev, staging, production), maintain một whitelist:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Node.js/Express example
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;allowedOrigins&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;https://app.example.com&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;https://staging.example.com&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;http://localhost:3000&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// Development
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;app&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;use&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;next&lt;/span&gt;) =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;origin&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;headers&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;origin&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;allowedOrigins&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;includes&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;origin&lt;/span&gt;)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;setHeader&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Access-Control-Allow-Origin&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;origin&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;setHeader&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Access-Control-Allow-Methods&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;GET, POST, PUT, DELETE, OPTIONS&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;setHeader&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Access-Control-Allow-Headers&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Content-Type, Authorization&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;setHeader&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Access-Control-Allow-Credentials&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;true&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;setHeader&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Access-Control-Max-Age&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;86400&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Handle preflight
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;method&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;===&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;OPTIONS&amp;#39;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;sendStatus&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;204&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;next&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;});
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Header &lt;code&gt;Access-Control-Allow-Credentials&lt;/code&gt; cần đặc biệt chú ý. Nếu set &lt;code&gt;true&lt;/code&gt;, browser sẽ include cookies và authorization headers trong cross-origin requests. Nhưng khi enable credentials, bạn không thể dùng wildcard &lt;code&gt;*&lt;/code&gt; cho Allow-Origin, phải specify exact origin.&lt;/p&gt;
&lt;p&gt;Trong Java Spring Boot, config còn đơn giản hơn:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;@Configuration&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CorsConfig&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;implements&lt;/span&gt; WebMvcConfigurer {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;@Override&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;addCorsMappings&lt;/span&gt;(CorsRegistry registry) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        registry.&lt;span style=&#34;color:#a6e22e&#34;&gt;addMapping&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/api/**&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                .&lt;span style=&#34;color:#a6e22e&#34;&gt;allowedOrigins&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://app.example.com&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://localhost:3000&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                .&lt;span style=&#34;color:#a6e22e&#34;&gt;allowedMethods&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;POST&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PUT&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DELETE&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OPTIONS&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                .&lt;span style=&#34;color:#a6e22e&#34;&gt;allowedHeaders&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Content-Type&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Authorization&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                .&lt;span style=&#34;color:#a6e22e&#34;&gt;allowCredentials&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                .&lt;span style=&#34;color:#a6e22e&#34;&gt;maxAge&lt;/span&gt;(86400);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;debugging-cors-issues&#34;&gt;Debugging CORS issues
&lt;/h2&gt;&lt;p&gt;Khi gặp CORS errors, bước đầu tiên là mở DevTools Network tab. Tìm request bị block và check cả request headers lẫn response headers. Request phải có header &lt;code&gt;Origin&lt;/code&gt;, còn response phải có &lt;code&gt;Access-Control-Allow-Origin&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Nếu thấy preflight request (method OPTIONS) failed, nghĩa là server chưa handle preflight đúng cách. Server phải respond với status 200 hoặc 204 và include tất cả CORS headers cần thiết.&lt;/p&gt;
&lt;p&gt;Một trick mình hay dùng là temporary disable CORS ở browser để verify rằng vấn đề thực sự là CORS chứ không phải lỗi khác. Chrome có thể start với flag &lt;code&gt;--disable-web-security&lt;/code&gt;. Nhưng nhớ rằng đây chỉ để debug, never dùng trong production.&lt;/p&gt;
&lt;p&gt;Nếu API của bạn phía sau proxy hoặc load balancer, đảm bảo rằng CORS headers không bị strip đi. Một số proxies có default config remove certain headers. Bạn cần config proxy để preserve CORS headers hoặc thêm headers ở proxy level.&lt;/p&gt;
&lt;h2 id=&#34;cors-với-credentials-và-authentication&#34;&gt;CORS với credentials và authentication
&lt;/h2&gt;&lt;p&gt;Khi làm việc với authenticated APIs, CORS trở nên phức tạp hơn một chút. Nếu API yêu cầu authentication token trong header (ví dụ JWT), frontend phải include credentials trong fetch request:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;fetch&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;https://api.example.com/protected&amp;#39;&lt;/span&gt;, {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;method&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;GET&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;credentials&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;include&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#75715e&#34;&gt;// Quan trọng!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;headers&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Authorization&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Bearer &amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;token&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Content-Type&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;application/json&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;then&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt; =&amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;json&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;then&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt; =&amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Setting &lt;code&gt;credentials: &#39;include&#39;&lt;/code&gt; tells browser gửi cookies và authorization headers. Server phải respond với &lt;code&gt;Access-Control-Allow-Credentials: true&lt;/code&gt; và một specific origin (không được dùng wildcard).&lt;/p&gt;
&lt;p&gt;Một pattern hay gặp là dùng cookies cho session management. Browser automatically gửi cookies trong mọi request đến domain đó, kể cả cross-origin requests. Nhưng với CORS, cookies chỉ được gửi nếu &lt;code&gt;credentials: &#39;include&#39;&lt;/code&gt; ở client và &lt;code&gt;Allow-Credentials: true&lt;/code&gt; ở server. Đây là layer bảo vệ thêm để prevent accidental credential leakage.&lt;/p&gt;
&lt;h2 id=&#34;cors-không-phải-silver-bullet&#34;&gt;CORS không phải silver bullet
&lt;/h2&gt;&lt;p&gt;Quan trọng là hiểu rằng CORS không phải là security feature cho backend. Nó là một browser security mechanism để protect users. Backend vẫn phải implement proper authentication và authorization. Việc một request pass được CORS check không có nghĩa là request đó legitimate.&lt;/p&gt;
&lt;p&gt;Hacker có thể bypass CORS bằng cách gửi requests từ server-side code (không qua browser) hoặc dùng proxy. CORS chỉ prevent malicious websites từ việc sử dụng browser của user để attack. Nó không protect API khỏi direct attacks.&lt;/p&gt;
&lt;p&gt;Vì thế, backend phải luôn validate requests, check authentication tokens, verify permissions. CORS chỉ là một layer trong defense-in-depth strategy, không phải là duy nhất.&lt;/p&gt;
&lt;h2 id=&#34;security-considerations&#34;&gt;Security considerations
&lt;/h2&gt;&lt;p&gt;Khi config CORS, easy mistake là quá permissive. Setting &lt;code&gt;Access-Control-Allow-Origin: *&lt;/code&gt; tiện lợi nhưng nguy hiểm. Bất kỳ website nào cũng có thể call API của bạn từ browser. Nếu API không require authentication, data có thể bị leaked.&lt;/p&gt;
&lt;p&gt;Worse hơn, nếu bạn set wildcard và enable credentials cùng lúc, browser sẽ reject (thankfully). Nhưng nhiều developers thấy error rồi fix bằng cách allow specific origin trong code nhưng vẫn check origin không cẩn thận, leading to bypass opportunities.&lt;/p&gt;
&lt;p&gt;Một attack vector là subdomain takeover. Nếu bạn allow &lt;code&gt;*.example.com&lt;/code&gt;, attacker có thể takeover một abandoned subdomain và sử dụng nó để call API với valid origin. Better practice là whitelist exact subdomains bạn control.&lt;/p&gt;
&lt;p&gt;Reflect origin từ request header vào response cũng nguy hiểm. Nếu code chỉ đơn giản là &lt;code&gt;res.setHeader(&#39;Access-Control-Allow-Origin&#39;, req.headers.origin)&lt;/code&gt;, bất kỳ origin nào cũng qua. Phải validate origin against whitelist trước.&lt;/p&gt;
&lt;h2 id=&#34;kết-luận&#34;&gt;Kết luận
&lt;/h2&gt;&lt;p&gt;Same-Origin Policy và CORS thường bị hiểu lầm là &amp;ldquo;lỗi phiền phức&amp;rdquo; của web development. Nhưng thực ra chúng là những mechanisms quan trọng bảo vệ users khỏi cross-site attacks. Hiểu rõ cách chúng hoạt động ở tầng mạng và browser runtime giúp bạn không chỉ fix CORS errors mà còn design secure APIs.&lt;/p&gt;
&lt;p&gt;CORS không hoạt động ở network layer hay transport layer. Nó là một tầng bảo mật ở application layer, được implement bởi browsers để kiểm soát cross-origin access. Server express consent thông qua CORS headers, browser enforce policies đó. Postman và các HTTP clients khác không gặp CORS vì chúng không chạy trong browser security context.&lt;/p&gt;
&lt;p&gt;Khi implement CORS, hãy balance giữa usability và security. Quá strict làm development khó khăn, quá permissive tạo security holes. Whitelist specific origins, validate requests properly, và test thoroughly ở tất cả environments. CORS errors thường là dấu hiệu rằng bạn đang làm đúng - browser đang protect users. Nhiệm vụ của developer là config properly để legitimate requests pass qua nhưng malicious requests bị block.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Tham khảo:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MDN Web Docs: Same-Origin Policy &amp;amp; CORS&lt;/li&gt;
&lt;li&gt;OWASP CORS Security Cheat Sheet&lt;/li&gt;
&lt;li&gt;RFC 6454: The Web Origin Concept&lt;/li&gt;
&lt;li&gt;&amp;ldquo;Web Security Academy&amp;rdquo; - PortSwigger&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>JavaScript trong mô hình Client–Server: Từ trình duyệt đến server</title>
        <link>http://localhost:1313/post/js-client-server/</link>
        <pubDate>Mon, 22 Dec 2025 00:23:10 +0700</pubDate>
        
        <guid>http://localhost:1313/post/js-client-server/</guid>
        <description>&lt;img src="http://localhost:1313/images/js-client-server.jpg" alt="Featured image of post JavaScript trong mô hình Client–Server: Từ trình duyệt đến server" /&gt;&lt;h2 id=&#34;giới-thiệu&#34;&gt;Giới thiệu
&lt;/h2&gt;&lt;p&gt;Trước đây, JavaScript (JS) chỉ được biết đến như một ngôn ngữ &amp;ldquo;trang trí&amp;rdquo; cho giao diện web (Front-end). Nhưng với sự ra đời của &lt;strong&gt;Node.js&lt;/strong&gt;, JavaScript đã vươn mình trở thành một ngôn ngữ &lt;strong&gt;Full-stack&lt;/strong&gt;, hoạt động mạnh mẽ ở cả phía Client (người dùng) và Server (máy chủ).&lt;/p&gt;
&lt;p&gt;Bài viết này sẽ mổ xẻ cách JavaScript vận hành trong mô hình Client-Server và hướng dẫn bạn xây dựng một ứng dụng demo đơn giản để thấy rõ sự kết nối này.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;1-mô-hình-client--server-là-gì&#34;&gt;1. Mô hình Client – Server là gì?
&lt;/h2&gt;&lt;p&gt;Hãy tưởng tượng bạn đi ăn nhà hàng:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Client (Khách hàng)&lt;/strong&gt;: Là bạn. Bạn xem menu và đưa ra yêu cầu (Request) là món ăn bạn muốn.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Server (Nhà bếp)&lt;/strong&gt;: Là nơi tiếp nhận yêu cầu, chế biến món ăn và trả lại kết quả (Response) là món ăn hoàn chỉnh.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;trong-lập-trình-web&#34;&gt;Trong lập trình web
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Client&lt;/strong&gt;: Là trình duyệt (Chrome, Safari&amp;hellip;) chạy trên máy tính/điện thoại của người dùng.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Server&lt;/strong&gt;: Là máy tính chứa cơ sở dữ liệu và logic nghiệp vụ, luôn bật để chờ yêu cầu.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Giao thức (HTTP)&lt;/strong&gt;: Là &amp;ldquo;người bồi bàn&amp;rdquo; chuyển tin nhắn giữa Client và Server.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-javascript-hoạt-động-như-thế-nào-ở-hai-đầu-cầu&#34;&gt;2. JavaScript hoạt động như thế nào ở hai đầu cầu?
&lt;/h2&gt;&lt;p&gt;Điểm đặc biệt là chúng ta sử dụng cùng một ngôn ngữ cho cả hai vai trò, nhưng môi trường và nhiệm vụ lại khác nhau.&lt;/p&gt;
&lt;h3 id=&#34;a-javascript-tại-client-trình-duyệt&#34;&gt;A. JavaScript tại Client (Trình duyệt)
&lt;/h3&gt;&lt;p&gt;Tại đây, JS chạy trên môi trường trình duyệt.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Nhiệm vụ:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Thao tác DOM&lt;/strong&gt;: Thay đổi nội dung HTML, CSS (ví dụ: bấm nút thì hiện popup).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Xử lý sự kiện người dùng&lt;/strong&gt;: Click, cuộn chuột, gõ phím.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Gửi yêu cầu (Request)&lt;/strong&gt;: Sử dụng &lt;code&gt;fetch()&lt;/code&gt; hoặc &lt;code&gt;axios&lt;/code&gt; để gọi dữ liệu từ Server mà không cần tải lại trang (AJAX).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Giới hạn:&lt;/strong&gt; Không thể đọc/ghi file trực tiếp trên máy tính người dùng (vì lý do bảo mật), không thể kết nối trực tiếp vào Database.&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
  &lt;img src=&#34;http://localhost:1313/images/client-side-js.jpg&#34; alt=&#34;JavaScript Client-Side&#34; /&gt;
&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
  &lt;em&gt;Mô hình Javascript ở phía khách&lt;/em&gt;
&lt;/p&gt;
&lt;h3 id=&#34;b-javascript-tại-server-nodejs&#34;&gt;B. JavaScript tại Server (Node.js)
&lt;/h3&gt;&lt;p&gt;Tại đây, JS chạy trên môi trường Node.js (một runtime sử dụng V8 Engine của Google nhưng tách khỏi trình duyệt).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Nhiệm vụ:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tạo ra các &lt;strong&gt;API&lt;/strong&gt; để Client gọi vào.&lt;/li&gt;
&lt;li&gt;Đọc/Ghi file trên hệ thống.&lt;/li&gt;
&lt;li&gt;Kết nối và truy vấn &lt;strong&gt;Cơ sở dữ liệu&lt;/strong&gt; (MySQL, MongoDB&amp;hellip;).&lt;/li&gt;
&lt;li&gt;Xử lý logic phức tạp, bảo mật, xác thực người dùng.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Đặc điểm:&lt;/strong&gt; Hoạt động theo cơ chế &lt;strong&gt;Non-blocking I/O&lt;/strong&gt; (Không chặn), giúp xử lý hàng ngàn kết nối cùng lúc rất hiệu quả.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;3-tại-sao-nên-dùng-javascript-cho-cả-hai-phía&#34;&gt;3. Tại sao nên dùng JavaScript cho cả hai phía?
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Đồng bộ ngôn ngữ&lt;/strong&gt;: Dev chỉ cần giỏi một ngôn ngữ là có thể làm cả Front-end và Back-end.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Tái sử dụng code&lt;/strong&gt;: Các hàm validate dữ liệu, định dạng số/chuỗi có thể dùng chung cho cả hai phía.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;JSON (JavaScript Object Notation)&lt;/strong&gt;: Dữ liệu trao đổi giữa Client và Server thường là JSON. Vì JSON &amp;ldquo;sinh ra&amp;rdquo; từ JS, việc xử lý dữ liệu trở nên cực kỳ mượt mà, không cần chuyển đổi phức tạp.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cộng đồng khổng lồ&lt;/strong&gt;: Kho thư viện NPM (Node Package Manager) lớn nhất thế giới.&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;4-hướng-dẫn-demo-ứng-dụng-lời-chào-từ-server&#34;&gt;4. Hướng dẫn Demo: Ứng dụng &amp;ldquo;Lời chào từ Server&amp;rdquo;
&lt;/h2&gt;&lt;p&gt;Chúng ta sẽ làm một ví dụ đơn giản: Client bấm nút, Server xử lý logic và trả về lời chào kèm thời gian thực.&lt;/p&gt;
&lt;h3 id=&#34;chuẩn-bị&#34;&gt;Chuẩn bị
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Cài đặt NodeJS &lt;a class=&#34;link&#34; href=&#34;https://nodejs.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;tại đây&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Tạo một thư mục dự án, ví dụ &lt;code&gt;js-client-server-demo&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;bước-1-xây-dựng-server-back-end&#34;&gt;Bước 1: Xây dựng Server (Back-end)
&lt;/h3&gt;&lt;p&gt;Mở terminal tại thư mục dự án, chạy lệnh:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm init -y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm install express cors
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;(Express là framework web cho Node.js, Cors giúp cho phép Client kết nối).&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Tạo file &lt;code&gt;server.js&lt;/code&gt; và dán code sau:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// server.js
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;express&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;require&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;express&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cors&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;require&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;cors&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;app&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;express&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PORT&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3000&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Cho phép mọi Client kết nối
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;app&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;use&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;cors&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Định nghĩa một API (Endpoint)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Khi Client gọi vào đường dẫn &amp;#39;/api/hello&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;app&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/api/hello&amp;#39;&lt;/span&gt;, (&lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;) =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Server: Đã nhận được yêu cầu từ Client!&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;currentTime&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Date().&lt;span style=&#34;color:#a6e22e&#34;&gt;toLocaleTimeString&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Dữ liệu Server trả về (Response)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Xin chào! Đây là tin nhắn từ Node.js Server.&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;currentTime&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;status&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    };
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Gửi trả lại dưới dạng JSON
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;res&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;json&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;});
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Khởi động Server
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;app&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;listen&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;PORT&lt;/span&gt;, () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;`Server đang chạy tại http://localhost:&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PORT&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;});
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;bước-2-xây-dựng-client-front-end&#34;&gt;Bước 2: Xây dựng Client (Front-end)
&lt;/h3&gt;&lt;p&gt;Tạo file &lt;code&gt;index.html&lt;/code&gt; cùng thư mục:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;html&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lang&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;vi&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;head&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;charset&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UTF-8&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;title&lt;/span&gt;&amp;gt;JS Client Server Demo&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;title&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;style&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;body&lt;/span&gt; { 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;font-family&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;sans-serif&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;text-align&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;center&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;padding-top&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;px&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        #result { 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;margin-top&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;px&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;padding&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;px&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;border&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;px&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;solid&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;#ddd&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;display&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;none&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;button&lt;/span&gt; { 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;padding&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;px&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;px&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;cursor&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;pointer&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;background&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;#f7df1e&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;border&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;none&lt;/span&gt;; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;font-weight&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;bold&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;style&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;head&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;body&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;h1&lt;/span&gt;&amp;gt;Mô hình Client - Server&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;h1&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;button&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;btnGetData&amp;#34;&lt;/span&gt;&amp;gt;Gửi lời chào tới Server&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;button&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;result&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;h3&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;msg&amp;#34;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;h3&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;p&lt;/span&gt;&amp;gt;Server time: &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;span&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;span&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;p&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;script&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;btn&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; document.&lt;span style=&#34;color:#a6e22e&#34;&gt;getElementById&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;btnGetData&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;resultBox&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; document.&lt;span style=&#34;color:#a6e22e&#34;&gt;getElementById&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;msgDisplay&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; document.&lt;span style=&#34;color:#a6e22e&#34;&gt;getElementById&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;msg&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;timeDisplay&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; document.&lt;span style=&#34;color:#a6e22e&#34;&gt;getElementById&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;time&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;btn&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;addEventListener&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;click&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#75715e&#34;&gt;// 1. Client gửi Request tới Server
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Client: Đang gửi yêu cầu...&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fetch&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;http://localhost:3000/api/hello&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#75715e&#34;&gt;// 2. Chờ Server trả lời và chuyển đổi sang JSON
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;json&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#75715e&#34;&gt;// 3. Hiển thị dữ liệu lên giao diện (DOM Manipulation)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;msgDisplay&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;innerText&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;timeDisplay&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;innerText&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;resultBox&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;style&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;display&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;block&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Client: Đã nhận dữ liệu:&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Lỗi kết nối:&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#a6e22e&#34;&gt;alert&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Không thể kết nối tới Server!&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;script&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;body&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;html&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;bước-3-chạy-thử-nghiệm&#34;&gt;Bước 3: Chạy thử nghiệm
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;Tại terminal, chạy server: &lt;code&gt;node server.js&lt;/code&gt; (Bạn sẽ thấy dòng: &lt;em&gt;Server đang chạy tại &lt;a class=&#34;link&#34; href=&#34;http://localhost:3000&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://localhost:3000&lt;/a&gt;&lt;/em&gt;)&lt;/li&gt;
&lt;li&gt;Mở file &lt;code&gt;index.html&lt;/code&gt; trực tiếp bằng trình duyệt.&lt;/li&gt;
&lt;li&gt;Bấm nút &lt;strong&gt;&amp;ldquo;Gửi lời chào tới Server&amp;rdquo;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Kết quả&lt;/strong&gt;: Bạn sẽ thấy lời chào và thời gian hiện ra. Nếu bạn mở Console của trình duyệt (F12) và Terminal của Node.js, bạn sẽ thấy các dòng log chứng tỏ sự giao tiếp đã thành công.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;tổng-kết&#34;&gt;Tổng kết
&lt;/h2&gt;&lt;p&gt;Qua ví dụ trên, chúng ta thấy rõ luồng đi của dữ liệu:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Trình duyệt (Client)&lt;/strong&gt; dùng JS để gửi &lt;code&gt;fetch&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Node.js (Server)&lt;/strong&gt; nhận tín hiệu, xử lý logic lấy giờ, và gói dữ liệu thành JSON.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Trình duyệt&lt;/strong&gt; nhận JSON và dùng JS để cập nhật giao diện HTML.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Việc làm chủ cả hai đầu cầu này chính là bước đầu tiên để bạn trở thành một &lt;strong&gt;Full-stack JavaScript Developer&lt;/strong&gt;. Từ đây, bạn có thể mở rộng sang xây dựng các ứng dụng phức tạp hơn như REST API, Real-time Chat, hoặc thậm chí các hệ thống Microservices.&lt;/p&gt;
&lt;h3 id=&#34;các-bước-tiếp-theo&#34;&gt;Các bước tiếp theo
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Tìm hiểu về &lt;strong&gt;Express.js middleware&lt;/strong&gt; để xử lý authentication, logging&lt;/li&gt;
&lt;li&gt;Học cách kết nối với &lt;strong&gt;Database&lt;/strong&gt; (MongoDB, PostgreSQL)&lt;/li&gt;
&lt;li&gt;Khám phá &lt;strong&gt;WebSocket&lt;/strong&gt; để xây dựng ứng dụng real-time&lt;/li&gt;
&lt;li&gt;Tìm hiểu về &lt;strong&gt;RESTful API design&lt;/strong&gt; và best practices&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Happy coding!&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
