<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Phân tích chuyên sâu về TCP và UDP trong lập trình mạng Java, so sánh Socket và DatagramSocket, kèm ví dụ thực tế cho chat app, game online và streaming"
    />
    <title>
      Java Socket Programming: TCP vs UDP trong ứng dụng thực tế - THUẬN AN IT BLOG
    </title>

    
    
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
    

    
    <script src="https://cdn.tailwindcss.com"></script>

    
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                50: "#f0f9ff",
                100: "#e0f2fe",
                200: "#bae6fd",
                300: "#7dd3fc",
                400: "#38bdf8",
                500: "#0ea5e9",
                600: "#0284c7",
                700: "#0369a1",
                800: "#075985",
                900: "#0c4a6e",
              },
            },
          },
        },
      };
    </script>

    
     
    <link rel="stylesheet" href="//localhost:1313/css/main.css" />
    
  </head>
  <body class="bg-slate-900 text-gray-100">
    
    
<nav class="bg-slate-950 border-b border-slate-800 shadow-lg sticky top-0 z-50">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      
      <div class="flex items-center gap-3">
        
        <img
          src="/icon/icon.png"
          alt="Blog Icon"
          class="w-10 h-10 rounded-lg"
        />

        
        <div>
          <a
            href="/"
            class="text-xl font-bold text-cyan-400 hover:text-cyan-300 transition-colors block"
          >
            THUẬN AN IT BLOG
          </a>
          <p class="text-xs text-gray-400">
            Blog chia sẻ kiến thức về lập trình & AI
          </p>
        </div>
      </div>

      
      <div class="hidden md:flex items-center space-x-6">
        
        <a
          href="/"
          class="text-gray-300 hover:text-cyan-400 transition-colors font-medium text-sm"
        >
          Home
        </a>

        
        
        <a
          href="/research/"
          class="text-gray-300 hover:text-cyan-400 transition-colors font-medium text-sm"
        >
          Research
        </a>
        
        <a
          href="/portfolio/"
          class="text-gray-300 hover:text-cyan-400 transition-colors font-medium text-sm"
        >
          Portfolio
        </a>
        
        <a
          href="/about/"
          class="text-gray-300 hover:text-cyan-400 transition-colors font-medium text-sm"
        >
          About
        </a>
        
        <a
          href="/contact/"
          class="text-gray-300 hover:text-cyan-400 transition-colors font-medium text-sm"
        >
          Contact
        </a>
        

        
        <div class="relative group">
          <button
            class="text-gray-300 hover:text-cyan-400 transition-colors font-medium flex items-center text-sm"
          >
            Categories
            <svg
              class="w-4 h-4 ml-1"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              ></path>
            </svg>
          </button>

          
          <div
            class="absolute left-0 mt-2 w-48 bg-slate-800 border border-slate-700 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200"
          >
            <div class="py-2">
              
              <a
                href="//localhost:1313/categories/backend/"
                class="block px-4 py-2 text-gray-300 hover:bg-slate-700 hover:text-cyan-400 transition-colors text-sm"
              >
                Backend
                <span class="text-gray-500 text-xs">(1)</span>
              </a>
              
              <a
                href="//localhost:1313/categories/java/"
                class="block px-4 py-2 text-gray-300 hover:bg-slate-700 hover:text-cyan-400 transition-colors text-sm"
              >
                Java
                <span class="text-gray-500 text-xs">(6)</span>
              </a>
              
              <a
                href="//localhost:1313/categories/javascript/"
                class="block px-4 py-2 text-gray-300 hover:bg-slate-700 hover:text-cyan-400 transition-colors text-sm"
              >
                JavaScript
                <span class="text-gray-500 text-xs">(3)</span>
              </a>
              
              <a
                href="//localhost:1313/categories/network/"
                class="block px-4 py-2 text-gray-300 hover:bg-slate-700 hover:text-cyan-400 transition-colors text-sm"
              >
                Network
                <span class="text-gray-500 text-xs">(2)</span>
              </a>
              
              <a
                href="//localhost:1313/categories/network-programming/"
                class="block px-4 py-2 text-gray-300 hover:bg-slate-700 hover:text-cyan-400 transition-colors text-sm"
              >
                Network Programming
                <span class="text-gray-500 text-xs">(2)</span>
              </a>
              
              <a
                href="//localhost:1313/categories/networking/"
                class="block px-4 py-2 text-gray-300 hover:bg-slate-700 hover:text-cyan-400 transition-colors text-sm"
              >
                Networking
                <span class="text-gray-500 text-xs">(4)</span>
              </a>
              
              <a
                href="//localhost:1313/categories/programming/"
                class="block px-4 py-2 text-gray-300 hover:bg-slate-700 hover:text-cyan-400 transition-colors text-sm"
              >
                Programming
                <span class="text-gray-500 text-xs">(4)</span>
              </a>
              
              <a
                href="//localhost:1313/categories/security/"
                class="block px-4 py-2 text-gray-300 hover:bg-slate-700 hover:text-cyan-400 transition-colors text-sm"
              >
                Security
                <span class="text-gray-500 text-xs">(1)</span>
              </a>
              
              <a
                href="//localhost:1313/categories/system-design/"
                class="block px-4 py-2 text-gray-300 hover:bg-slate-700 hover:text-cyan-400 transition-colors text-sm"
              >
                System Design
                <span class="text-gray-500 text-xs">(1)</span>
              </a>
              
              <a
                href="//localhost:1313/categories/web-development/"
                class="block px-4 py-2 text-gray-300 hover:bg-slate-700 hover:text-cyan-400 transition-colors text-sm"
              >
                Web Development
                <span class="text-gray-500 text-xs">(1)</span>
              </a>
              
              <a
                href="//localhost:1313/categories/web-security/"
                class="block px-4 py-2 text-gray-300 hover:bg-slate-700 hover:text-cyan-400 transition-colors text-sm"
              >
                Web Security
                <span class="text-gray-500 text-xs">(1)</span>
              </a>
              
            </div>
          </div>
        </div>
      </div>

      
      <button
        id="mobile-menu-button"
        class="md:hidden text-gray-300 hover:text-cyan-400 focus:outline-none"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"
          ></path>
        </svg>
      </button>
    </div>

    
    <div id="mobile-menu" class="hidden md:hidden pb-4">
      <a
        href="/"
        class="block py-2 text-gray-300 hover:text-cyan-400 transition-colors font-medium"
      >
        Home
      </a>

      
      
      <a
        href="/research/"
        class="block py-2 text-gray-300 hover:text-cyan-400 transition-colors font-medium"
      >
        Research
      </a>
      
      <a
        href="/portfolio/"
        class="block py-2 text-gray-300 hover:text-cyan-400 transition-colors font-medium"
      >
        Portfolio
      </a>
      
      <a
        href="/about/"
        class="block py-2 text-gray-300 hover:text-cyan-400 transition-colors font-medium"
      >
        About
      </a>
      
      <a
        href="/contact/"
        class="block py-2 text-gray-300 hover:text-cyan-400 transition-colors font-medium"
      >
        Contact
      </a>
      

      <div class="py-2">
        <div class="font-medium text-white mb-2">Categories:</div>
        
        <a
          href="//localhost:1313/categories/backend/"
          class="block py-1 pl-4 text-gray-300 hover:text-cyan-400 transition-colors"
        >
          Backend
          <span class="text-gray-500 text-sm">(1)</span>
        </a>
        
        <a
          href="//localhost:1313/categories/java/"
          class="block py-1 pl-4 text-gray-300 hover:text-cyan-400 transition-colors"
        >
          Java
          <span class="text-gray-500 text-sm">(6)</span>
        </a>
        
        <a
          href="//localhost:1313/categories/javascript/"
          class="block py-1 pl-4 text-gray-300 hover:text-cyan-400 transition-colors"
        >
          JavaScript
          <span class="text-gray-500 text-sm">(3)</span>
        </a>
        
        <a
          href="//localhost:1313/categories/network/"
          class="block py-1 pl-4 text-gray-300 hover:text-cyan-400 transition-colors"
        >
          Network
          <span class="text-gray-500 text-sm">(2)</span>
        </a>
        
        <a
          href="//localhost:1313/categories/network-programming/"
          class="block py-1 pl-4 text-gray-300 hover:text-cyan-400 transition-colors"
        >
          Network Programming
          <span class="text-gray-500 text-sm">(2)</span>
        </a>
        
        <a
          href="//localhost:1313/categories/networking/"
          class="block py-1 pl-4 text-gray-300 hover:text-cyan-400 transition-colors"
        >
          Networking
          <span class="text-gray-500 text-sm">(4)</span>
        </a>
        
        <a
          href="//localhost:1313/categories/programming/"
          class="block py-1 pl-4 text-gray-300 hover:text-cyan-400 transition-colors"
        >
          Programming
          <span class="text-gray-500 text-sm">(4)</span>
        </a>
        
        <a
          href="//localhost:1313/categories/security/"
          class="block py-1 pl-4 text-gray-300 hover:text-cyan-400 transition-colors"
        >
          Security
          <span class="text-gray-500 text-sm">(1)</span>
        </a>
        
        <a
          href="//localhost:1313/categories/system-design/"
          class="block py-1 pl-4 text-gray-300 hover:text-cyan-400 transition-colors"
        >
          System Design
          <span class="text-gray-500 text-sm">(1)</span>
        </a>
        
        <a
          href="//localhost:1313/categories/web-development/"
          class="block py-1 pl-4 text-gray-300 hover:text-cyan-400 transition-colors"
        >
          Web Development
          <span class="text-gray-500 text-sm">(1)</span>
        </a>
        
        <a
          href="//localhost:1313/categories/web-security/"
          class="block py-1 pl-4 text-gray-300 hover:text-cyan-400 transition-colors"
        >
          Web Security
          <span class="text-gray-500 text-sm">(1)</span>
        </a>
        
      </div>
    </div>
  </div>
</nav>


<script>
  document
    .getElementById("mobile-menu-button")
    .addEventListener("click", function () {
      const menu = document.getElementById("mobile-menu");
      menu.classList.toggle("hidden");
    });
</script>


    
    <main class="min-h-screen">
<div class="container mx-auto px-4 py-8">
  <div class="grid grid-cols-1 lg:grid-cols-10 gap-8">
    
    <div class="lg:col-span-7">
      <article
        class="bg-slate-800 border border-slate-700 rounded-lg shadow-lg p-8"
      >
        
        <header class="mb-8">
          
          
          <div class="mb-6 -mx-8 -mt-8">
            <img
              src="/images/java-tcp-udp.jpg"
              alt="Java Socket Programming: TCP vs UDP trong ứng dụng thực tế"
              class="w-full h-96 object-cover rounded-t-lg"
            />
          </div>
          

          <h1 class="text-4xl font-bold mb-4 text-white">Java Socket Programming: TCP vs UDP trong ứng dụng thực tế</h1>

          <div
            class="flex flex-wrap items-center gap-4 text-sm text-gray-400 mb-4"
          >
            
            <span class="flex items-center">
              <svg
                class="w-4 h-4 mr-1"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                ></path>
              </svg>
              22/12/2025
            </span>

            
            
          </div>

          
          
          <div class="flex flex-wrap gap-2 mb-4">
            
            <a
              href="/categories/java"
              class="px-3 py-1 bg-cyan-900 bg-opacity-30 text-cyan-300 border border-cyan-600 rounded-full text-sm hover:bg-cyan-800 hover:bg-opacity-40 transition-colors"
            >
              Java
            </a>
            
            <a
              href="/categories/network-programming"
              class="px-3 py-1 bg-cyan-900 bg-opacity-30 text-cyan-300 border border-cyan-600 rounded-full text-sm hover:bg-cyan-800 hover:bg-opacity-40 transition-colors"
            >
              Network Programming
            </a>
            
          </div>
          

          
          
          <div class="flex flex-wrap gap-2">
            
            <a
              href="/tags/java"
              class="px-3 py-1 bg-slate-700 text-gray-300 rounded-full text-sm hover:bg-slate-600 transition-colors"
            >
              #Java
            </a>
            
            <a
              href="/tags/socket"
              class="px-3 py-1 bg-slate-700 text-gray-300 rounded-full text-sm hover:bg-slate-600 transition-colors"
            >
              #Socket
            </a>
            
            <a
              href="/tags/tcp"
              class="px-3 py-1 bg-slate-700 text-gray-300 rounded-full text-sm hover:bg-slate-600 transition-colors"
            >
              #TCP
            </a>
            
            <a
              href="/tags/udp"
              class="px-3 py-1 bg-slate-700 text-gray-300 rounded-full text-sm hover:bg-slate-600 transition-colors"
            >
              #UDP
            </a>
            
            <a
              href="/tags/network"
              class="px-3 py-1 bg-slate-700 text-gray-300 rounded-full text-sm hover:bg-slate-600 transition-colors"
            >
              #Network
            </a>
            
            <a
              href="/tags/backend"
              class="px-3 py-1 bg-slate-700 text-gray-300 rounded-full text-sm hover:bg-slate-600 transition-colors"
            >
              #Backend
            </a>
            
          </div>
          
        </header>

        
        <div
          class="prose prose-invert max-w-none prose-headings:font-bold prose-headings:text-white prose-a:text-cyan-400 prose-a:no-underline hover:prose-a:underline prose-img:rounded-lg prose-pre:bg-slate-950 prose-pre:border prose-pre:border-slate-700 prose-code:text-cyan-300 text-gray-300"
        >
          <h2 id="giới-thiệu">Giới thiệu</h2>
<p>Hồi học môn mạng máy tính, mình cứ nghĩ TCP và UDP chỉ khác nhau ở chỗ một cái reliable một cái không thôi. Nhưng khi code thực tế mới thấy sự khác biệt lớn hơn thế nhiều. Bài này mình sẽ đi sâu vào cả network layer lẫn Java implementation để hiểu tại sao có những ứng dụng phải dùng TCP, có những ứng dụng lại chỉ chạy tốt với UDP.</p>
<h2 id="tcp-transmission-control-protocol">TCP: Transmission Control Protocol</h2>
<h3 id="tcp-handshake---cái-bắt-tay-3-bước-tốn-thời-gian">TCP Handshake - Cái bắt tay 3 bước tốn thời gian</h3>
<p>Trước khi gửi bất kỳ data nào, TCP phải thiết lập kết nối qua 3-way handshake. Client gửi một segment với cờ SYN kèm theo sequence number ngẫu nhiên (gọi là ISN - Initial Sequence Number). Server nhận được thì gửi lại SYN-ACK, vừa xác nhận ISN của client vừa gửi ISN của chính nó. Cuối cùng client gửi ACK để xác nhận ISN của server.</p>
<div style="text-align: center; margin: 2rem 0;">
  <img src="/images/tcp-3-way.png" alt="TCP 3-way handshake" style="max-width: 600px; width: 100%; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" />
  <p style="margin-top: 0.8rem; color: #666; font-style: italic;">TCP 3 bước bắt tay</p>
</div>
<p>Nghe có vẻ đơn giản nhưng quá trình này tốn <strong>1.5 RTT</strong> (Round-Trip Time). Nếu client và server ở xa nhau thì latency này khá đáng kể. Chưa kể cả hai bên phải giữ connection state trong memory. Khi đóng kết nối lại phải 4-way handshake nữa, thêm 2 RTT nữa.</p>
<h3 id="tcp-đảm-bảo-reliable-như-thế-nào">TCP đảm bảo reliable như thế nào?</h3>
<p>TCP không tin tưởng network layer. Nó tự implement reliability bằng cách đánh số thứ tự cho từng byte data. Khi receiver nhận được data, nó gửi ACK packet ngược lại để báo &ldquo;tao đã nhận đến byte số X rồi&rdquo;. Sender sẽ giữ data trong buffer cho đến khi nhận được ACK.</p>
<p>Nếu sender không nhận được ACK sau một khoảng thời gian (gọi là RTO - Retransmission Timeout), nó sẽ gửi lại data đó. Có một trick tối ưu là <strong>Fast Retransmit</strong>: nếu sender nhận được 3 duplicate ACK liên tiếp, nó biết ngay là packet bị mất và gửi lại luôn thay vì đợi timeout.</p>
<p>Chi phí của reliability này là gì? Mỗi ACK packet tạo overhead, retransmission gây delay, và buffer memory cho unacknowledged data khá tốn tài nguyên.</p>
<h3 id="ordering---data-đến-đúng-thứ-tự">Ordering - Data đến đúng thứ tự</h3>
<p>Giả sử bạn gửi 3 packets qua network, packet 2 đi chậm hơn packet 3. TCP ở receiver sẽ sắp xếp lại theo sequence number và buffer packet 3 cho đến khi packet 2 đến. Application layer nhận data theo đúng thứ tự đã gửi, không bao giờ bị lộn xộn.</p>
<p>Điều này quan trọng với những ứng dụng như chat (tin nhắn phải hiện theo thứ tự), file transfer (byte sequence phải đúng), nhưng lại gây vấn đề cho real-time app (mình sẽ nói sau).</p>
<h3 id="congestion-control---tcp-biết-điều">Congestion Control - TCP &ldquo;biết điều&rdquo;</h3>
<p>TCP có khả năng tự điều chỉnh tốc độ gửi dựa trên tình trạng mạng. Ban đầu nó bắt đầu chậm với congestion window (cwnd) = 1 MSS, sau đó tăng gấp đôi mỗi RTT (<strong>Slow Start</strong>). Khi đạt đến threshold, nó chuyển sang tăng tuyến tính (<strong>Congestion Avoidance</strong>).</p>
<p>Nếu phát hiện packet loss (qua timeout hoặc duplicate ACK), TCP giảm cwnd xuống. Điều này giúp TCP &ldquo;công bằng&rdquo; với các connection khác trên mạng, nhưng lại làm throughput giảm khi mạng tắc nghẽn - không tốt cho ứng dụng streaming hay gaming.</p>
<h2 id="udp-user-datagram-protocol">UDP: User Datagram Protocol</h2>
<h3 id="udp---gửi-thẳng-không-cần-hỏi-han">UDP - Gửi thẳng không cần hỏi han</h3>
<p>UDP khác TCP từ triết lý thiết kế. Nó không có khái niệm &ldquo;connection&rdquo;. Bạn muốn gửi data? Đóng gói vào datagram và ném đi thôi, không cần handshake, không cần ACK, không cần biết bên kia có nhận được hay không.</p>
<p>Mỗi datagram của UDP hoàn toàn độc lập. Không có sequence number, không có connection state, không có gì cả. Đơn giản và nhanh.</p>
<h3 id="tại-sao-udp-lại-nhanh">Tại sao UDP lại nhanh?</h3>
<p>Thứ nhất, không mất thời gian thiết lập kết nối. Ngay khi bắt đầu chương trình, UDP gửi data được luôn. TCP phải đợi 1.5 RTT mới bắt đầu được.</p>
<p>Thứ hai, header của UDP chỉ 8 bytes so với 20-60 bytes của TCP. Ít overhead hơn nghĩa là bandwidth hiệu quả hơn.</p>
<p>Thứ ba, không có retransmission. Packet mất thì mất, UDP không quan tâm. Application nhận được gì thì nhận, không nhận được thì thôi. Không có ACK nghĩa là latency cực thấp.</p>
<p>Thứ tư, UDP không có congestion control. Nó gửi với tốc độ cố định mà application muốn, không tự động giảm tốc khi mạng tắc.</p>
<h3 id="đánh-đổi-của-udp">Đánh đổi của UDP</h3>
<p>Reliability bay hơi hết. Packet có thể mất, có thể bị duplicate, UDP chẳng quan tâm. Application muốn reliability thì phải tự code.</p>
<p>Ordering cũng không có. Datagram có thể đến lộn xộn thứ tự. Bạn gửi packet 1, 2, 3 nhưng receiver có thể nhận 1, 3, 2. Application phải tự handle nếu cần.</p>
<p>Flow control không tồn tại. Sender có thể gửi nhanh hơn receiver xử lý được, dẫn đến tràn buffer và mất data.</p>
<p>Congestion control cũng không có. UDP có thể gây tắc nghẽn mạng mà không biết. Nếu quan tâm đến fairness với các connection khác, application phải tự implement.</p>
<h2 id="socket-programming-trong-java">Socket Programming trong Java</h2>
<h3 id="tcp-socket---connection-oriented">TCP Socket - Connection-oriented</h3>
<p>TCP trong Java dùng class <code>Socket</code> (client) và <code>ServerSocket</code> (server). Cái hay của TCP Socket là nó cho ta stream-based API, đọc ghi như file vậy.</p>
<p><strong>Server side:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.*;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TCPServer</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Tạo ServerSocket lắng nghe trên port 8080</span>
</span></span><span style="display:flex;"><span>        ServerSocket serverSocket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ServerSocket(8080);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Server listening on port 8080&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Accept connection (blocking call - chờ cho đến khi có client)</span>
</span></span><span style="display:flex;"><span>        Socket clientSocket <span style="color:#f92672">=</span> serverSocket.<span style="color:#a6e22e">accept</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Client connected: &#34;</span> <span style="color:#f92672">+</span> clientSocket.<span style="color:#a6e22e">getRemoteSocketAddress</span>());
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Stream để đọc/ghi dữ liệu - giống như đọc/ghi file</span>
</span></span><span style="display:flex;"><span>        BufferedReader in <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> InputStreamReader(clientSocket.<span style="color:#a6e22e">getInputStream</span>())
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        PrintWriter out <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PrintWriter(clientSocket.<span style="color:#a6e22e">getOutputStream</span>(), <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Nhận message từ client</span>
</span></span><span style="display:flex;"><span>        String message <span style="color:#f92672">=</span> in.<span style="color:#a6e22e">readLine</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Received: &#34;</span> <span style="color:#f92672">+</span> message);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Gửi phản hồi</span>
</span></span><span style="display:flex;"><span>        out.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Echo: &#34;</span> <span style="color:#f92672">+</span> message);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Đóng kết nối</span>
</span></span><span style="display:flex;"><span>        clientSocket.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>        serverSocket.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Client side:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.*;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TCPClient</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Kết nối đến server - lúc này 3-way handshake diễn ra</span>
</span></span><span style="display:flex;"><span>        Socket socket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Socket(<span style="color:#e6db74">&#34;localhost&#34;</span>, 8080);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Connected to server&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Stream để đọc/ghi</span>
</span></span><span style="display:flex;"><span>        PrintWriter out <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PrintWriter(socket.<span style="color:#a6e22e">getOutputStream</span>(), <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>        BufferedReader in <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> InputStreamReader(socket.<span style="color:#a6e22e">getInputStream</span>())
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Gửi message</span>
</span></span><span style="display:flex;"><span>        out.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Hello Server&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Nhận phản hồi</span>
</span></span><span style="display:flex;"><span>        String response <span style="color:#f92672">=</span> in.<span style="color:#a6e22e">readLine</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Server response: &#34;</span> <span style="color:#f92672">+</span> response);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Đóng socket</span>
</span></span><span style="display:flex;"><span>        socket.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Chú ý rằng <code>accept()</code> và <code>read()</code> đều là <strong>blocking call</strong>. Thread sẽ dừng lại đợi cho đến khi có client kết nối hoặc có data đến. Trong production, ta thường dùng multi-threading hoặc NIO để handle nhiều clients.</p>
<h3 id="udp-socket---connectionless">UDP Socket - Connectionless</h3>
<p>UDP dùng <code>DatagramSocket</code> cho cả client lẫn server. Khác với TCP, ta không gọi <code>connect()</code> hay <code>accept()</code>. Muốn gửi data thì pack vào <code>DatagramPacket</code> và <code>send()</code> thôi.</p>
<p><strong>Server side:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UDPServer</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Tạo DatagramSocket bind vào port 9090</span>
</span></span><span style="display:flex;"><span>        DatagramSocket socket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DatagramSocket(9090);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;UDP Server started on port 9090&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> receiveBuffer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">byte</span><span style="color:#f92672">[</span>1024<span style="color:#f92672">]</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Nhận datagram - blocking nhưng không cần accept trước</span>
</span></span><span style="display:flex;"><span>            DatagramPacket receivePacket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DatagramPacket(
</span></span><span style="display:flex;"><span>                receiveBuffer, receiveBuffer.<span style="color:#a6e22e">length</span>
</span></span><span style="display:flex;"><span>            );
</span></span><span style="display:flex;"><span>            socket.<span style="color:#a6e22e">receive</span>(receivePacket);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            String message <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String(receivePacket.<span style="color:#a6e22e">getData</span>(), 0, 
</span></span><span style="display:flex;"><span>                receivePacket.<span style="color:#a6e22e">getLength</span>());
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Received: &#34;</span> <span style="color:#f92672">+</span> message);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Lấy địa chỉ client từ packet vừa nhận</span>
</span></span><span style="display:flex;"><span>            InetAddress clientAddress <span style="color:#f92672">=</span> receivePacket.<span style="color:#a6e22e">getAddress</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">int</span> clientPort <span style="color:#f92672">=</span> receivePacket.<span style="color:#a6e22e">getPort</span>();
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Gửi phản hồi</span>
</span></span><span style="display:flex;"><span>            String response <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Echo: &#34;</span> <span style="color:#f92672">+</span> message;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> sendData <span style="color:#f92672">=</span> response.<span style="color:#a6e22e">getBytes</span>();
</span></span><span style="display:flex;"><span>            DatagramPacket sendPacket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DatagramPacket(
</span></span><span style="display:flex;"><span>                sendData, sendData.<span style="color:#a6e22e">length</span>, clientAddress, clientPort
</span></span><span style="display:flex;"><span>            );
</span></span><span style="display:flex;"><span>            socket.<span style="color:#a6e22e">send</span>(sendPacket);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Client side:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UDPClient</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Tạo DatagramSocket - không cần connect</span>
</span></span><span style="display:flex;"><span>        DatagramSocket socket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DatagramSocket();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Chuẩn bị data để gửi</span>
</span></span><span style="display:flex;"><span>        String message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello UDP Server&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> sendData <span style="color:#f92672">=</span> message.<span style="color:#a6e22e">getBytes</span>();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Tạo packet với địa chỉ đích</span>
</span></span><span style="display:flex;"><span>        InetAddress serverAddress <span style="color:#f92672">=</span> InetAddress.<span style="color:#a6e22e">getByName</span>(<span style="color:#e6db74">&#34;localhost&#34;</span>);
</span></span><span style="display:flex;"><span>        DatagramPacket sendPacket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DatagramPacket(
</span></span><span style="display:flex;"><span>            sendData, sendData.<span style="color:#a6e22e">length</span>, serverAddress, 9090
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Gửi datagram - không đảm bảo sẽ đến</span>
</span></span><span style="display:flex;"><span>        socket.<span style="color:#a6e22e">send</span>(sendPacket);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Sent: &#34;</span> <span style="color:#f92672">+</span> message);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Nhận phản hồi</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> receiveBuffer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">byte</span><span style="color:#f92672">[</span>1024<span style="color:#f92672">]</span>;
</span></span><span style="display:flex;"><span>        DatagramPacket receivePacket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DatagramPacket(
</span></span><span style="display:flex;"><span>            receiveBuffer, receiveBuffer.<span style="color:#a6e22e">length</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        socket.<span style="color:#a6e22e">receive</span>(receivePacket);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        String response <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String(receivePacket.<span style="color:#a6e22e">getData</span>(), 0, 
</span></span><span style="display:flex;"><span>            receivePacket.<span style="color:#a6e22e">getLength</span>());
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Server response: &#34;</span> <span style="color:#f92672">+</span> response);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        socket.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Điều lưu ý với UDP là phải chỉ định kích thước buffer trước. Mỗi datagram có giới hạn 64KB (thực tế thường dùng dưới 1500 bytes để tránh IP fragmentation).</p>
<h3 id="so-sánh-nhanh">So sánh nhanh</h3>
<table>
  <thead>
      <tr>
          <th>Tiêu chí</th>
          <th>TCP Socket</th>
          <th>UDP DatagramSocket</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>API</strong></td>
          <td><code>Socket</code>, <code>ServerSocket</code></td>
          <td><code>DatagramSocket</code></td>
      </tr>
      <tr>
          <td><strong>Connection</strong></td>
          <td>Cần <code>connect()</code> và <code>accept()</code></td>
          <td>Không cần</td>
      </tr>
      <tr>
          <td><strong>Data model</strong></td>
          <td>Stream (InputStream/OutputStream)</td>
          <td>Message (DatagramPacket)</td>
      </tr>
      <tr>
          <td><strong>Reliability</strong></td>
          <td>Đảm bảo delivery</td>
          <td>Best effort</td>
      </tr>
      <tr>
          <td><strong>Ordering</strong></td>
          <td>Đảm bảo thứ tự</td>
          <td>Không đảm bảo</td>
      </tr>
      <tr>
          <td><strong>Overhead</strong></td>
          <td>Header 20-60 bytes</td>
          <td>Header 8 bytes</td>
      </tr>
      <tr>
          <td><strong>Use case</strong></td>
          <td>HTTP, File transfer, Chat</td>
          <td>DNS, Gaming, Streaming</td>
      </tr>
  </tbody>
</table>
<h2 id="phân-tích-tình-huống-thực-tế">Phân tích tình huống thực tế</h2>
<h3 id="chat-application">Chat Application</h3>
<p>Nếu bạn làm một app chat như Messenger hay Telegram, chọn gì? Câu trả lời là TCP, và lý do rất đơn giản: tin nhắn không được phép mất.</p>
<p>Tưởng tượng bạn gửi &ldquo;Hẹn gặp lúc 7h nhé&rdquo; nhưng message mất giữa đường và người kia không nhận được. Đó là disaster. TCP đảm bảo mọi message đều đến đích. Hơn nữa, tin nhắn phải hiển thị đúng thứ tự. Nếu bạn gửi &ldquo;Alo&rdquo; rồi &ldquo;Khỏe không?&rdquo;, người nhận thấy &ldquo;Khỏe không?&rdquo; trước &ldquo;Alo&rdquo; thì trông rất weird.</p>
<p>Latency của chat app thường không quá critical. Delay 100-500ms là chấp nhận được. User không cần realtime như game, chậm vài trăm ms không ai để ý. Vì vậy overhead của TCP (3-way handshake, ACK) là acceptable trade-off.</p>
<p>Thêm một lợi ích nữa: TCP connection state giúp ta biết user online hay offline. WebSocket (protocol chạy trên TCP) duy trì long-lived connection, server có thể push notification xuống client ngay lập tức.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Server pattern cho chat: một thread per client</span>
</span></span><span style="display:flex;"><span>ServerSocket serverSocket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ServerSocket(8080);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>) {
</span></span><span style="display:flex;"><span>    Socket client <span style="color:#f92672">=</span> serverSocket.<span style="color:#a6e22e">accept</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">new</span> Thread(<span style="color:#66d9ef">new</span> ChatHandler(client)).<span style="color:#a6e22e">start</span>(); <span style="color:#75715e">// handle client riêng</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="game-online-real-time-multiplayer">Game Online (Real-time Multiplayer)</h3>
<p>Game online là trường hợp ngược lại hoàn toàn. Ở đây, <strong>latency là king</strong>. Bạn chơi một game FPS và nhấn shoot, nếu action delay 200ms thì game chơi như shit. UDP là lựa chọn duy nhất.</p>
<p>Trong game, client liên tục gửi player position đến server với tần suất 20-60 lần/giây. Nếu dùng TCP, mỗi packet cần ACK - đó là overhead khủng khiếp. Worse hơn nữa là <strong>head-of-line blocking</strong>: nếu packet 100 bị mất, TCP sẽ block packet 101, 102 cho đến khi retransmit packet 100 thành công. Nhưng trong game, vị trí ở frame 100 đã stale rồi, frame 102 mới là dữ liệu fresh.</p>
<p>UDP gửi packet và quên đi. Packet mất? No problem, vài frame sau sẽ có update mới. Game player sẽ thấy nhân vật giật một chút nhưng không bị lag nặng như TCP.</p>
<p>Tất nhiên, UDP không reliable nên ta phải tự code logic xử lý:</p>
<p><strong>Client-side prediction</strong>: Client dự đoán vị trí của mình trước khi server confirm, để movement mượt mà. Khi server gửi state thực về, client reconcile lại.</p>
<p><strong>Redundancy</strong>: Những event quan trọng (như player tử vong) được gửi nhiều lần để đảm bảo server nhận được.</p>
<p><strong>Sequence number</strong> ở application level để detect out-of-order packets.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Client gửi vị trí liên tục</span>
</span></span><span style="display:flex;"><span>DatagramSocket socket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DatagramSocket();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> (gameRunning) {
</span></span><span style="display:flex;"><span>    String position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;POS:&#34;</span> <span style="color:#f92672">+</span> x <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;,&#34;</span> <span style="color:#f92672">+</span> y <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;,&#34;</span> <span style="color:#f92672">+</span> timestamp;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> data <span style="color:#f92672">=</span> position.<span style="color:#a6e22e">getBytes</span>();
</span></span><span style="display:flex;"><span>    socket.<span style="color:#a6e22e">send</span>(<span style="color:#66d9ef">new</span> DatagramPacket(data, data.<span style="color:#a6e22e">length</span>, serverAddr, port));
</span></span><span style="display:flex;"><span>    Thread.<span style="color:#a6e22e">sleep</span>(16); <span style="color:#75715e">// ~60 FPS</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Một pattern hay là <strong>hybrid approach</strong>: dùng UDP cho player movement (frequent, ephemeral), nhưng dùng TCP cho chat, inventory, và critical events (infrequent, important).</p>
<h3 id="video-streaming">Video Streaming</h3>
<p>Streaming video phức tạp hơn vì có hai trường hợp khác nhau: Live streaming và Video on Demand (VOD).</p>
<p><strong>Live streaming</strong> (Twitch, Zoom) cần latency thấp. Bạn không thể buffer 30 giây vì đó là live stream. UDP là lựa chọn tốt hơn. Nếu mất vài frames video thì chỉ thấy artifact nhỏ trong vài milliseconds, không critical. Data cũ không có giá trị - nếu packet bị delay thì client không cần nữa vì frame mới đã đến.</p>
<p>Trong thực tế, live streaming dùng <strong>RTP (Real-time Transport Protocol)</strong> chạy trên UDP. WebRTC (dùng cho peer-to-peer streaming) cũng dùng UDP. RTMP (protocol cũ dùng TCP) đã bị deprecated vì latency quá cao.</p>
<p>Để xử lý packet loss, live streaming thường dùng <strong>Forward Error Correction (FEC)</strong>: thêm redundant data vào stream để có thể recover lost packets mà không cần retransmission.</p>
<p><strong>VOD</strong> (YouTube, Netflix) lại khác. Client có thể buffer trước 5-30 giây nên latency không quan trọng. Thay vào đó, chất lượng video phải perfect - không ai chấp nhận artifact trong phim họ đang xem. TCP là lựa chọn đúng đắn.</p>
<p>HLS (HTTP Live Streaming) và DASH đều dùng HTTP/TCP. Video được chia thành segments nhỏ (2-10 giây), client request từng segment qua HTTP. Nếu bandwidth giảm, client tự động switch xuống quality thấp hơn (<strong>adaptive streaming</strong>). Reliable delivery của TCP đảm bảo mỗi segment đến đầy đủ.</p>
<p>Thêm nữa, TCP-based streaming tương thích tốt với infrastructure hiện tại: CDN, proxy, firewall đều support HTTP sẵn rồi.</p>
<table>
  <thead>
      <tr>
          <th>Tiêu chí</th>
          <th>Live Streaming (UDP)</th>
          <th>VOD (TCP)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Latency</td>
          <td>&lt; 1s</td>
          <td>5-30s buffer OK</td>
      </tr>
      <tr>
          <td>Quality</td>
          <td>Chấp nhận mất frames</td>
          <td>Perfect delivery</td>
      </tr>
      <tr>
          <td>Protocol</td>
          <td>RTP, WebRTC</td>
          <td>HLS, DASH</td>
      </tr>
      <tr>
          <td>Example</td>
          <td>Twitch, Zoom</td>
          <td>YouTube, Netflix</td>
      </tr>
  </tbody>
</table>
<h2 id="kết-luận-khi-nào-dùng-cái-nào">Kết luận: Khi nào dùng cái nào?</h2>
<h3 id="dùng-tcp-khi">Dùng TCP khi</h3>
<p>Ứng dụng cần <strong>reliability và correctness</strong> hơn là speed. File transfer, REST API, database connections, email, financial transactions - tất cả đều cần data đến đầy đủ và đúng thứ tự. Latency cao hơn một chút là chấp nhận được để đổi lấy guarantee.</p>
<p>Một lợi ích khác là infrastructure support. Firewall, proxy, CDN đều được thiết kế để handle TCP/HTTP tốt. Nếu app của bạn cần đi qua corporate firewall, TCP gần như chắc chắn work.</p>
<h3 id="dùng-udp-khi">Dùng UDP khi</h3>
<p>Ứng dụng cần <strong>low latency</strong> và real-time data. VoIP, video conferencing, online gaming, live streaming, IoT sensor data - những thứ này cần data fresh hơn là data complete. Stale data không có giá trị, chậm còn tệ hơn mất data.</p>
<p>Tất nhiên bạn phải tự xử lý reliability nếu cần. Protocols như QUIC (dùng cho HTTP/3) và RTP chạy trên UDP nhưng tự implement một số tính năng của TCP ở application layer.</p>
<h3 id="xu-hướng-hiện-đại-quic">Xu hướng hiện đại: QUIC</h3>
<p>Google phát triển <strong>QUIC</strong> (Quick UDP Internet Connections) và hiện HTTP/3 chạy trên QUIC over UDP. QUIC kết hợp ưu điểm của cả hai bên: reliability của TCP nhưng latency thấp hơn.</p>
<p>QUIC có multiplexing mà không bị head-of-line blocking (vấn đề lớn của TCP), support 0-RTT connection establishment (không cần 3-way handshake), và tích hợp sẵn TLS encryption.</p>
<p><strong>Lesson learned</strong>: Không có protocol &ldquo;tốt nhất cho mọi trường hợp&rdquo;. Có protocol &ldquo;phù hợp nhất với use case của bạn&rdquo;. Hiểu rõ trade-offs để đưa ra quyết định đúng.</p>
<hr>
<p><strong>Tham khảo:</strong></p>
<ul>
<li>RFC 793 (TCP), RFC 768 (UDP)</li>
<li>&ldquo;Computer Networking: A Top-Down Approach&rdquo; - Kurose &amp; Ross</li>
<li>Java Network Programming (O&rsquo;Reilly)</li>
</ul>

        </div>
      </article>
    </div>

    
    <div class="lg:col-span-3">
<div
  class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-lg shadow-lg p-6"
>
  
  
  <div class="text-center mb-4">
    <img
      src="/images/avatar.jpg"
      alt="Lý Thuận An"
      class="w-48 h-48 rounded-lg mx-auto object-cover shadow-md border-4 border-slate-700"
    />
  </div>
  

  
  <h3
    class="text-lg font-bold mb-2 text-white text-center flex items-center justify-center"
  >
    <svg
      class="w-5 h-5 mr-2 text-cyan-400"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
      ></path>
    </svg>
    ABOUT ME
  </h3>

  
  <div class="space-y-3">
    
    
    <div class="text-center">
      <h4 class="font-bold text-white text-xl">
        Lý Thuận An
      </h4>
    </div>
    

    
    
    <p class="text-gray-400 text-sm text-center leading-relaxed italic">
      Engineer #Pencraft Cloud, Open Source Enthusiast and Life Adventurer
    </p>
    

    
    
    <p class="text-gray-300 leading-relaxed text-sm">
      Mình là Lý Thuận An, đang theo học năm cuối chuyên ngành Trí tuệ nhân tạo tại Đại học Công nghệ TP.HCM (HUTECH). Định hướng nghề nghiệp của mình tập trung vào việc kết nối nghiên cứu AI với phát triển ứng dụng thực tế.
    </p>
    

    
    <div class="space-y-2 pt-2">
      
      <a
        href="mailto:anly1704@gmail.com"
        class="flex items-center text-gray-300 hover:text-cyan-400 transition-colors text-sm"
      >
        <svg
          class="w-4 h-4 mr-2 text-cyan-400"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"
          />
        </svg>
        anly1704@gmail.com
      </a>
       
      <div class="flex items-center text-gray-300 text-sm">
        <svg
          class="w-4 h-4 mr-2 text-cyan-400"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"
          />
        </svg>
        &#43;84 769 339 058
      </div>
      
    </div>

    
    <div class="flex items-center justify-center gap-3 pt-3">
      
      <a
        href="https://github.com/aresu-1704"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center justify-center w-10 h-10 bg-gray-700 hover:bg-gray-600 text-white rounded-full transition-all duration-200 hover:scale-110"
        title="GitHub"
      >
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
          <path
            d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
          />
        </svg>
      </a>
       
      <a
        href="https://www.facebook.com/an.thuan.3139241"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center justify-center w-10 h-10 bg-blue-600 hover:bg-blue-500 text-white rounded-full transition-all duration-200 hover:scale-110"
        title="Facebook"
      >
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
          <path
            d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
          />
        </svg>
      </a>
      
    </div>
  </div>
  
</div>
</div>
  </div>
</div>
</main>

    
    <footer
      class="bg-slate-950 text-gray-400 py-8 mt-12 border-t border-slate-800"
    >
      <div class="container mx-auto px-4 text-center">
        <p>&copy; 2025 THUẬN AN IT BLOG. All rights reserved.</p>
      </div>
    </footer>

    
    <script src="/js/search.js"></script>
  </body>
</html>
